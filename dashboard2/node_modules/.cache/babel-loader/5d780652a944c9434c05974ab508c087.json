{"ast":null,"code":"var _jsxFileName = \"D:\\\\Jaya\\\\proj\\\\youdirectory\\\\frontend\\\\src\\\\components\\\\AdminDashboard\\\\News\\\\Content\\\\AddNews.js\";\nimport React, { Component } from 'react';\nimport Axios from '../../../../axios';\nimport '../../Admin-css/Admin-Detail.css';\nimport Message from './Message';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class AddNews extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.openMessage = e => {\n      this.setState({\n        message: true\n      });\n    };\n\n    this.closeMessage = e => {\n      this.setState({\n        message: false\n      });\n      this.refreshPage();\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const isValid = this.handleFormValidation();\n\n      if (isValid) {\n        if (this.state.setImage === 1) {\n          let data = new FormData();\n          data.append('title', this.state.title);\n          data.append('news_category', this.state.news_category);\n          data.append('news_subcategory', this.state.news_subcategory);\n          data.append('content', this.state.content);\n          data.append('image', this.state.image);\n          data.append('source', this.state.source);\n          console.log(this.state);\n          Axios.post(`/addNews/${this.state.setImage}`, data).then(response => {\n            console.log(response);\n            this.setState({\n              successMsg: true\n            });\n            this.refreshPage();\n          }).catch(error => {\n            console.log(error);\n          });\n        } else if (this.state.setImage === 0) {\n          const data = {\n            title: this.state.title,\n            news_category: this.state.news_category,\n            news_subcategory: this.state.news_subcategory,\n            content: this.state.content,\n            image: this.state.image,\n            source: this.state.source\n          };\n          Axios.post('/addNews', data).then(response => {\n            console.log(response);\n            this.setState({\n              successMsg: true\n            });\n            this.refreshPage();\n          }).catch(error => {\n            console.log(error);\n          });\n        }\n      }\n    };\n\n    let setImage = 0;\n    this.state = {\n      ncategories: [],\n      title: '',\n      news_category: '',\n      news_subcategory: '',\n      content: '',\n      image: null,\n      source: '',\n      message: '',\n      responseData: '',\n      formErrors: {},\n      setImage\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.openMessage = this.openMessage.bind(this);\n    this.closeMessage = this.closeMessage.bind(this);\n    this.onUpload = this.onUpload.bind(this);\n    this.refreshPage = this.refreshPage.bind(this);\n    this.handleFormValidation = this.handleFormValidation.bind(this);\n  }\n\n  refreshPage() {\n    window.location.reload(false);\n  }\n\n  onUpload(e) {\n    // let file = e.target.files[0];\n    this.setState({\n      image: e.target.files[0],\n      setImage: 1\n    });\n    console.log(e.target.files[0]);\n  }\n\n  componentDidMount() {\n    Axios.get('/getNewsCategory').then(response => {\n      // console.log(response)\n      this.setState({\n        ncategories: response.data\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  handleFormValidation() {\n    const formErrors = {};\n    let isValid = true;\n    const {\n      title,\n      news_category,\n      content\n    } = this.state;\n\n    if (title === '') {\n      formErrors.titleError = \"News Title is Required!!\";\n      isValid = false;\n    }\n\n    if (news_category === '') {\n      formErrors.news_categoryError = \"News Category is Required!!\";\n      isValid = false;\n    }\n\n    if (content === '') {\n      formErrors.contentError = \"Description is Required!!\";\n      isValid = false;\n    }\n\n    if (title.length === 1) {\n      formErrors.titleError = \"Title must be of of 4 or more\";\n      isValid = false;\n    }\n\n    if (title.length === 2) {\n      formErrors.titleError = \"Title must be of of 4 or more\";\n      isValid = false;\n    }\n\n    if (title.length === 3) {\n      formErrors.titleError = \"Title must be of of 4 or more\";\n      isValid = false;\n    }\n\n    if (title.length > 250) {\n      formErrors.titleError = \"Title must be of length 250\";\n      isValid = false;\n    }\n\n    if (content.length > 2000) {\n      formErrors.contentError = \"Description must be of length 2000\";\n      isValid = false;\n    }\n\n    if (content.length < 10) {\n      formErrors.contentError = \"Description must be of 10 or more\";\n      isValid = false;\n    }\n\n    this.setState({\n      formErrors\n    });\n    return isValid;\n  }\n\n  render() {\n    const {\n      formErrors,\n      ncategories,\n      responseData\n    } = this.state;\n    const messageHide = this.state.message ? \"message-box display-block\" : \"message-box display-none\";\n\n    if (!this.props.show) {\n      return null;\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: this.props.showHide,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Add News Details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n            class: \"fal fa-times\",\n            onClick: this.props.handleClose\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-body\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid-3-col\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-box\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"div-input\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    class: \"form-control\",\n                    type: \"text\",\n                    name: \"title\",\n                    onChange: this.handleChange,\n                    value: this.title,\n                    placeholder: \"Title\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 224,\n                    columnNumber: 41\n                  }, this), formErrors.titleError && /*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"input-errorMsg\",\n                    children: formErrors.titleError\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 226,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-box\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"div-input\",\n                  children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                    class: \"form-control\",\n                    onChange: this.handleChange,\n                    name: \"news_category\",\n                    placeholder: \"Category\",\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      children: \"Select Category\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 234,\n                      columnNumber: 45\n                    }, this), ncategories.length ? ncategories.map(category => /*#__PURE__*/_jsxDEV(\"option\", {\n                      name: category.news_category,\n                      value: category.news_category,\n                      children: category.news_category\n                    }, category.nc_id, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 238,\n                      columnNumber: 57\n                    }, this)) : null]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 233,\n                    columnNumber: 41\n                  }, this), formErrors.news_categoryError && /*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"input-errorMsg\",\n                    children: formErrors.news_categoryError\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 243,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 232,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-box\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"div-input\",\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    class: \"form-control\",\n                    type: \"text\",\n                    name: \"news_subcategory\",\n                    onChange: this.handleChange,\n                    value: this.news_subcategory,\n                    placeholder: \"Sub Category\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 251,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 250,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 248,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-box\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"div-input\",\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    class: \"form-control\",\n                    type: \"text\",\n                    name: \"source\",\n                    onChange: this.handleChange,\n                    value: this.source,\n                    placeholder: \"Source Link\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 258,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 257,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-box\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"div-input\",\n                  children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                    rows: \"1\",\n                    class: \"form-control\",\n                    type: \"text\",\n                    name: \"content\",\n                    onChange: this.handleChange,\n                    value: this.content,\n                    placeholder: \"Description\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 264,\n                    columnNumber: 41\n                  }, this), formErrors.contentError && /*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"input-errorMsg\",\n                    children: formErrors.contentError\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 266,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 263,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 261,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-box\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"div-input\",\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    class: \"form-control\",\n                    type: \"file\",\n                    onChange: this.onUpload,\n                    name: \"image\",\n                    value: this.image,\n                    accept: \".png, .jpg\",\n                    placeholder: \"Image\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 273,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 272,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-footer\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              onClick: this.handleSubmit,\n              class: \"btn-footer\",\n              children: \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: this.props.handleClose,\n              className: \"btn-footer\",\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Message, {\n        show: this.state.message,\n        messageHide: messageHide,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Success !\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: responseData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"m-footer\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: this.closeMessage,\n            className: \"btn-footer\",\n            children: \"Ok\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["D:/Jaya/proj/youdirectory/frontend/src/components/AdminDashboard/News/Content/AddNews.js"],"names":["React","Component","Axios","Message","AddNews","constructor","props","handleChange","e","setState","target","name","value","openMessage","message","closeMessage","refreshPage","handleSubmit","preventDefault","isValid","handleFormValidation","state","setImage","data","FormData","append","title","news_category","news_subcategory","content","image","source","console","log","post","then","response","successMsg","catch","error","ncategories","responseData","formErrors","bind","onUpload","window","location","reload","files","componentDidMount","get","titleError","news_categoryError","contentError","length","render","messageHide","show","showHide","handleClose","map","category","nc_id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Axios from '../../../../axios'\nimport '../../Admin-css/Admin-Detail.css'\nimport Message from './Message'\n\nexport default class AddNews extends Component {\n\n    constructor (props) {\n        super(props)\n        let setImage = 0\n\n        this.state = {\n            \n            ncategories: [],\n\n            title: '',\n            news_category: '',\n            news_subcategory: '',\n            content: '',\n            image: null,\n            source: '',\n\n            message: '',\n\n            responseData: '',\n\n            formErrors: {},\n\n            setImage,\n            \n        }\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n\n        this.openMessage = this.openMessage.bind(this);\n        this.closeMessage = this.closeMessage.bind(this);\n\n        this.onUpload = this.onUpload.bind(this);\n\n        this.refreshPage = this.refreshPage.bind(this);\n        this.handleFormValidation = this.handleFormValidation.bind(this);\n    }\n\n    handleChange = (e) => {\n        this.setState({ [e.target.name]: e.target.value });\n    }\n\n    refreshPage() {\n        window.location.reload(false);\n    }\n\n    openMessage = (e) => {\n        this.setState({\n            message: true,\n        })\n    }\n\n    closeMessage = (e) => {\n        this.setState({\n            message: false,\n        })\n        this.refreshPage();\n    }\n\n    onUpload(e) {\n        // let file = e.target.files[0];\n        this.setState({\n            image: e.target.files[0],\n            setImage: 1,\n        })\n        console.log(e.target.files[0]);\n    }\n\n    componentDidMount(){\n\n        Axios.get('/getNewsCategory')\n            .then(response => {\n                // console.log(response)\n                this.setState({ ncategories: response.data })\n            })\n            .catch(error => {\n                console.log(error)\n            })\n    }\n\n    handleFormValidation() {\n        const formErrors = {};\n        let isValid = true;\n\n        const { title, news_category, content } = this.state\n\n        if (title === '') {\n            formErrors.titleError = \"News Title is Required!!\";\n            isValid = false;\n        }\n        if (news_category === '') {\n            formErrors.news_categoryError = \"News Category is Required!!\";\n            isValid = false;\n        }\n        \n        if (content === '') {\n            formErrors.contentError = \"Description is Required!!\";\n            isValid = false;\n        }\n        \n\n        if (title.length === 1) {\n            formErrors.titleError = \"Title must be of of 4 or more\";\n            isValid = false;\n        }\n        if (title.length === 2) {\n            formErrors.titleError = \"Title must be of of 4 or more\";\n            isValid = false;\n        }\n        if (title.length === 3) {\n            formErrors.titleError = \"Title must be of of 4 or more\";\n            isValid = false;\n        }\n        if (title.length > 250) {\n            formErrors.titleError = \"Title must be of length 250\";\n            isValid = false;\n        }\n       \n\n        if (content.length > 2000) {\n            formErrors.contentError = \"Description must be of length 2000\";\n            isValid = false;\n        }\n        if (content.length < 10) {\n            formErrors.contentError = \"Description must be of 10 or more\";\n            isValid = false;\n        }\n\n\n        this.setState({ formErrors });\n        return isValid;\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault();\n\n        const isValid = this.handleFormValidation();\n\n        if (isValid) {\n            if (this.state.setImage === 1) {\n\n                let data = new FormData();\n\n                data.append('title', this.state.title);\n                data.append('news_category', this.state.news_category);\n                data.append('news_subcategory', this.state.news_subcategory);\n                data.append('content', this.state.content);\n                data.append('image', this.state.image);\n                data.append('source', this.state.source);\n\n                console.log(this.state);\n                Axios.post(`/addNews/${ this.state.setImage}`, data)\n                    .then(response => {\n                        console.log(response);\n                        this.setState({\n                            successMsg: true,\n\n                        })\n                        this.refreshPage();\n                    })\n\n                    .catch(error => {\n                        console.log(error);\n                    })\n            }\n            else if (this.state.setImage === 0) {\n\n                const data = {\n                    title: this.state.title,\n                    news_category: this.state.news_category,\n                    news_subcategory: this.state.news_subcategory,\n                    content: this.state.content,\n                    image: this.state.image,\n                    source: this.state.source,\n\n                }\n\n                Axios.post('/addNews', data)\n                    .then(response => {\n                        console.log(response);\n                        this.setState({\n                            successMsg: true,\n\n                        })\n                        this.refreshPage();\n                    })\n\n                    .catch(error => {\n                        console.log(error);\n                    })\n\n            }\n        }\n\n    }\n\n    render() {\n\n        const { formErrors, ncategories, responseData } = this.state\n        const messageHide = this.state.message ? \"message-box display-block\" : \"message-box display-none\";\n\n        if (!this.props.show) {\n            return null;\n        }\n\n        return (\n            <div className={ this.props.showHide }>\n                <div className=\"modal-wrapper\" >\n                    <div className=\"modal-header\">\n                        <h4>Add News Details</h4>\n                        <i class=\"fal fa-times\" onClick={ this.props.handleClose }></i>\n                    </div>\n                    <div className=\"modal-content\">\n                        <div className=\"modal-body\">\n                            <div className=\"grid-3-col\">\n                                <div className=\"form-box\">\n                                    \n                                    <div className=\"div-input\">\n                                        <input class=\"form-control\" type=\"text\" name=\"title\" onChange={ this.handleChange } value={ this.title }  placeholder=\"Title\"/>\n                                        { formErrors.titleError &&\n                                            <div class=\"input-errorMsg\">{ formErrors.titleError }</div>\n                                        }\n                                    </div>\n                                </div>\n                                <div className=\"form-box\">\n                                    \n                                    <div className=\"div-input\">\n                                        <select class=\"form-control\" onChange={ this.handleChange } name=\"news_category\" placeholder=\"Category\">\n                                            <option>Select Category</option>{\n                                                ncategories.length ?\n                                                    ncategories.map(category =>\n\n                                                        <option name={ category.news_category } value={ category.news_category } key={ category.nc_id }>{ category.news_category }</option>\n                                                    ) : null\n                                            }\n                                        </select>\n                                        { formErrors.news_categoryError &&\n                                            <div class=\"input-errorMsg\">{ formErrors.news_categoryError }</div>\n                                        }\n                                    </div>\n                                </div>\n\n                                <div className=\"form-box\">\n                                    \n                                    <div className=\"div-input\">\n                                        <input class=\"form-control\" type=\"text\" name=\"news_subcategory\" onChange={ this.handleChange } value={ this.news_subcategory } placeholder=\"Sub Category\"/>\n                                    </div>\n                                </div>\n\n                                <div className=\"form-box\">\n                                   \n                                    <div className=\"div-input\">\n                                        <input class=\"form-control\" type=\"text\" name=\"source\" onChange={ this.handleChange } value={ this.source } placeholder=\"Source Link\" />\n                                    </div>\n                                </div>\n                                <div className=\"form-box\">\n                                    \n                                    <div className=\"div-input\">\n                                        <textarea rows=\"1\" class=\"form-control\" type=\"text\" name=\"content\" onChange={ this.handleChange } value={ this.content } placeholder=\"Description\"/>\n                                        { formErrors.contentError &&\n                                            <div class=\"input-errorMsg\">{ formErrors.contentError }</div>\n                                        }\n                                    </div>\n                                </div>\n                                <div className=\"form-box\">\n                                    \n                                    <div className=\"div-input\">\n                                        <input class=\"form-control\" type=\"file\" onChange={ this.onUpload } name=\"image\" value={ this.image } accept=\".png, .jpg\" placeholder=\"Image\"/>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"modal-footer\">\n                            <button type=\"submit\" onClick={ this.handleSubmit } class=\"btn-footer\">Submit</button>\n                            <button type=\"button\" onClick={ this.props.handleClose } className=\"btn-footer\">Cancel</button>\n                        </div>\n                    </div>\n                </div>\n                <Message show={ this.state.message } messageHide={ messageHide }>\n                    <h3>Success !</h3>\n                    <p>{ responseData }</p>\n                    <div className=\"m-footer\">\n                        <button type=\"button\" onClick={ this.closeMessage } className=\"btn-footer\">Ok</button>\n                    </div>\n                </Message>\n            </div>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}