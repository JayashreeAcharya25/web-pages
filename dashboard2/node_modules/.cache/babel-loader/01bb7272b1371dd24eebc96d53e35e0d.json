{"ast":null,"code":"import _asyncToGenerator from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"D:\\\\Jaya\\\\proj\\\\trial5\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{Component}from'react';import'../../Admin-css/Admin.css';import Axios from'../../../../axios';import Message from'./Message';import Alert from'./AlertMessage';import Edit from'./Edit';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Category=/*#__PURE__*/function(_Component){_inherits(Category,_Component);var _super=_createSuper(Category);function Category(props){var _this;_classCallCheck(this,Category);_this=_super.call(this,props);_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.openModal=function(e){_this.setState({show:true});};_this.closeModal=function(e){_this.setState({show:false});};_this.openMessage=function(e){_this.setState({message:true});};_this.closeMessage=function(e){_this.setState({message:false});_this.refreshPage();};_this.openAlert=function(id){_this.setState({alert:true,id:id});};_this.closeAlertMessage=function(e){_this.setState({alert:false});};_this.addCategory=function(e){e.preventDefault();var isValid=_this.handleFormValidation();if(isValid){Axios.post('/addCategory',_this.state).then(function(response){// console.log(response);\n_this.setState({responseData:response.data.message});_this.openMessage();}).catch(function(error){console.log(error);});}};_this.editCategory=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var editingItem;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:editingItem=_this.state.categories.find(function(category){return category.category_id===id;});// console.log(id);\n_context.next=3;return _this.setState({category_name:editingItem.category_name,editMode:id});case 3:_this.openModal();case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.state={categories:[],category_name:'',id:'',responseData:'',show:false,message:false,alert:false,editMode:false,formErrors:{}};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.handleUpdate=_this.handleUpdate.bind(_assertThisInitialized(_this));_this.closeModal=_this.closeModal.bind(_assertThisInitialized(_this));_this.openModal=_this.openModal.bind(_assertThisInitialized(_this));_this.openMessage=_this.openMessage.bind(_assertThisInitialized(_this));_this.closeMessage=_this.closeMessage.bind(_assertThisInitialized(_this));_this.closeAlertMessage=_this.closeAlertMessage.bind(_assertThisInitialized(_this));_this.refreshPage=_this.refreshPage.bind(_assertThisInitialized(_this));_this.handleFormValidation=_this.handleFormValidation.bind(_assertThisInitialized(_this));return _this;}_createClass(Category,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;Axios.get('/getCategory').then(function(response){// console.log(response)\n_this2.setState({categories:response.data});}).catch(function(error){console.log(error);});}},{key:\"refreshPage\",value:function refreshPage(){window.location.reload(false);}},{key:\"handleFormValidation\",value:function handleFormValidation(){var formErrors={};var isValid=true;var category_name=this.state.category_name;if(category_name===''){formErrors.category_nameError=\"Category Name is Required!!\";isValid=false;}if(category_name.length===1){formErrors.category_nameError=\"Category Name must be of of 4 or more\";isValid=false;}if(category_name.length===2){formErrors.category_nameError=\"Category Name must be of of 4 or more\";isValid=false;}if(category_name.length===3){formErrors.category_nameError=\"Category Name must be of of 4 or more\";isValid=false;}if(category_name.length>50){formErrors.category_nameError=\"Category Name must be of length 50\";isValid=false;}if(category_name.match(/[!@/$%^&*(),.?\":{}|<>]/)){formErrors.category_nameError=\"No Special Characters\";isValid=false;}this.setState({formErrors:formErrors});return isValid;}},{key:\"deleteCategory\",value:function deleteCategory(id){var _this3=this;Axios.delete(\"/deleteCategory/\".concat(id)).then(function(response){// console.log(response);\n_this3.setState({alert:false,responseData:response.data.message});_this3.openMessage();}).catch(function(error){console.log(error);// console.log(\"error-----\")\n});}},{key:\"handleUpdate\",value:function handleUpdate(e){var _this4=this;e.preventDefault();var id=this.state.editMode;console.log('...handle edit....');this.setState({editMode:true});Axios.put(\"/editCategory/\".concat(id),this.state).then(function(response){// console.log(response);\n_this4.closeModal();_this4.setState({responseData:response.data.message});_this4.openMessage();}).catch(function(error){console.log(error);});}},{key:\"render\",value:function render(){var _this5=this;var showHide=this.state.show?\"modal-wrapper display-block\":\"modal-wrapper display-none\";var messageHide=this.state.message?\"message-box display-block\":\"message-box display-none\";var alertHide=this.state.alert?\"message-box display-block\":\"message-box display-none\";var _this$state=this.state,formErrors=_this$state.formErrors,categories=_this$state.categories,responseData=_this$state.responseData;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"dash-class\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"class-title\",children:/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/admin_dashboard/category\",children:\"Shop Category\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"section div-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"div-class class-width\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-title\",children:/*#__PURE__*/_jsx(\"h5\",{children:\"Create Shop Category\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.addCategory,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"div-input\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",type:\"text\",name:\"category_name\",placeholder:\"Category Name\",onChange:this.handleChange,value:this.category_name}),formErrors.category_nameError&&/*#__PURE__*/_jsx(\"div\",{class:\"input-errorMsg\",children:formErrors.category_nameError})]}),/*#__PURE__*/_jsx(\"div\",{className:\"div-button\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",class:\"add-btn\",children:\"Create\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"div-class\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"class-table\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-title\",children:/*#__PURE__*/_jsx(\"h5\",{children:\"Shop Category List\"})}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Id\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:categories.length?categories.map(function(category){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:category.category_id}),/*#__PURE__*/_jsx(\"td\",{children:category.category_name}),/*#__PURE__*/_jsxs(\"td\",{class:\"action-btns\",children:[/*#__PURE__*/_jsx(\"button\",{class:\"div-action-btn\",onClick:_this5.editCategory.bind(_this5,category.category_id),children:/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-pen\"})}),/*#__PURE__*/_jsx(\"button\",{class:\"div-action-btn\",onClick:_this5.openAlert.bind(_this5,category.category_id),children:/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-trash\"})})]})]},category.id);}):null})]})]})}),/*#__PURE__*/_jsxs(Message,{show:this.state.message,messageHide:messageHide,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Success !\"}),/*#__PURE__*/_jsx(\"p\",{children:responseData}),/*#__PURE__*/_jsx(\"div\",{className:\"m-footer\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:this.closeMessage,className:\"btn-footer\",children:\"Ok\"})})]}),/*#__PURE__*/_jsxs(Alert,{show:this.state.alert,alertHide:alertHide,children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Are You Sure\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{children:\"You want to Delete this?\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"m-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:this.deleteCategory.bind(this,this.state.id),className:\"btn-footer\",children:\"Ok\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:this.closeAlertMessage,className:\"btn-footer\",children:\"Cancel\"})]})]}),/*#__PURE__*/_jsx(Edit,{show:this.state.show,handleClose:this.closeModal,handleSubmit:this.handleUpdate,showHide:showHide,children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"div-label\",children:/*#__PURE__*/_jsx(\"label\",{children:\"Category Name\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"div-input\",children:/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",type:\"text\",name:\"category_name\",onChange:this.handleChange,value:this.state.category_name,required:true})})]})})})]})]})});}}]);return Category;}(Component);export{Category as default};","map":{"version":3,"sources":["D:/Jaya/proj/trial5/frontend/src/components/AdminDashboard/Shop/Category/Category.js"],"names":["React","Component","Axios","Message","Alert","Edit","Category","props","handleChange","e","setState","target","name","value","openModal","show","closeModal","openMessage","message","closeMessage","refreshPage","openAlert","id","alert","closeAlertMessage","addCategory","preventDefault","isValid","handleFormValidation","post","state","then","response","responseData","data","catch","error","console","log","editCategory","editingItem","categories","find","category","category_id","category_name","editMode","formErrors","bind","handleUpdate","get","window","location","reload","category_nameError","length","match","delete","put","showHide","messageHide","alertHide","map","deleteCategory"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport '../../Admin-css/Admin.css'\nimport Axios from '../../../../axios'\n\nimport Message from './Message'\nimport Alert from './AlertMessage'\nimport Edit from './Edit'\n\nexport default class Category extends Component {\n\n    constructor(props) {\n        super(props)\n    \n        this.state = {\n            categories: [],\n            category_name : '',\n            id: '',\n\n            responseData: '',\n\n            show: false,\n            message: false,\n            alert: false,\n            editMode: false,\n            formErrors: {},\n        }\n        \n        this.handleChange = this.handleChange.bind(this);\n        this.handleUpdate = this.handleUpdate.bind(this);\n        this.closeModal = this.closeModal.bind(this);\n        this.openModal = this.openModal.bind(this);\n        this.openMessage = this.openMessage.bind(this);\n        this.closeMessage = this.closeMessage.bind(this);\n        this.closeAlertMessage = this.closeAlertMessage.bind(this);\n        this.refreshPage = this.refreshPage.bind(this);\n        this.handleFormValidation = this.handleFormValidation.bind(this);\n    }\n\n    componentDidMount(){\n        \n        Axios.get('/getCategory')\n        .then( response =>{\n            // console.log(response)\n            this.setState({categories: response.data})\n        })\n        .catch(error =>{\n            console.log(error)\n        })\n    }\n\n    \n    handleChange = (e) =>{\n        this.setState({[e.target.name]: e.target.value});\n    }\n\n    refreshPage(){\n        window.location.reload(false);\n    }\n\n    openModal = (e) => {\n        this.setState({\n            show: true\n        })\n    }\n\n    closeModal = (e) => {\n        this.setState({\n            show: false\n        })\n    }\n\n    openMessage = (e) => {\n        this.setState({\n            message: true\n        })\n    }\n\n    closeMessage = (e) => {\n        this.setState({\n            message: false,  \n        })\n        this.refreshPage();\n    }\n\n\n    openAlert = (id) =>{\n        this.setState({\n            alert: true,\n            id: id,\n        })\n    }\n\n    closeAlertMessage =(e) =>{\n        this.setState({\n            alert: false,\n           \n        })\n    }\n\n    handleFormValidation() {\n        const formErrors = {};\n        let isValid = true;\n\n        const { category_name } = this.state;\n\n        if (category_name === '') {\n            formErrors.category_nameError = \"Category Name is Required!!\";\n            isValid = false;\n        }\n\n        if (category_name.length === 1) {\n            formErrors.category_nameError = \"Category Name must be of of 4 or more\";\n            isValid = false;\n        }\n        if (category_name.length === 2) {\n            formErrors.category_nameError = \"Category Name must be of of 4 or more\";\n            isValid = false;\n        }\n        if (category_name.length === 3) {\n            formErrors.category_nameError = \"Category Name must be of of 4 or more\";\n            isValid = false;\n        }\n        if (category_name.length > 50) {\n            formErrors.category_nameError = \"Category Name must be of length 50\";\n            isValid = false;\n        }\n        if (category_name.match(/[!@/$%^&*(),.?\":{}|<>]/)) {\n            formErrors.category_nameError = \"No Special Characters\";\n            isValid = false;\n        }\n\n        this.setState({ formErrors });\n        return isValid;\n\n    }\n\n\n    addCategory =(e) =>{\n        e.preventDefault();\n\n        const isValid = this.handleFormValidation();\n\n        if (isValid) {\n\n           \n            Axios.post('/addCategory', this.state)\n            .then(response =>{\n                // console.log(response);\n                this.setState({\n                    responseData: response.data.message\n                })\n                this.openMessage();\n            })\n        \n            .catch(error =>{\n                console.log(error);\n            })\n        }\n    \n    }\n\n    deleteCategory(id){\n        \n        Axios.delete(`/deleteCategory/${id}`)\n        .then(response =>{\n            // console.log(response);\n            this.setState({\n                alert:false,\n                responseData: response.data.message\n                \n            })\n            this.openMessage();\n        })\n        .catch(error =>{\n            console.log(error);\n           \n            // console.log(\"error-----\")\n        })\n    }\n\n    editCategory = async (id) =>{\n        \n        \n        let editingItem = this.state.categories.find(category => {\n            return category.category_id === id;\n        })\n        // console.log(id);\n\n       await this.setState({\n            category_name: editingItem.category_name,\n            editMode: id\n        })\n        \n        this.openModal();\n    }\n\n\n\n    handleUpdate(e){\n        e.preventDefault();\n\n        let id = this.state.editMode;\n        console.log('...handle edit....')\n        this.setState({\n            editMode: true,\n                 \n        })\n\n        Axios.put(`/editCategory/${id}`, this.state)\n        .then(response =>{\n            // console.log(response);\n            this.closeModal();\n            this.setState({\n                responseData: response.data.message\n            })\n            this.openMessage();\n            \n        })\n        \n        .catch(error =>{\n            console.log(error);\n            \n        })\n    }\n\n    render() {\n\n        const showHide = this.state.show ? \"modal-wrapper display-block\" : \"modal-wrapper display-none\";\n        const messageHide = this.state.message ? \"message-box display-block\" : \"message-box display-none\";\n        const alertHide = this.state.alert ? \"message-box display-block\" : \"message-box display-none\";\n        \n        const { formErrors, categories, responseData} = this.state\n\n        return (\n            <>\n                <div className=\"dash-class\">\n                    <div className=\"class-title\">\n                        <h3><a href=\"/admin_dashboard/category\">Shop Category</a></h3>\n                    </div>\n\n                    <div className=\"section div-section\">\n                        <div className=\"div-class class-width\">\n                            <div className=\"section-title\">\n                                <h5>Create Shop Category</h5>\n                            </div><br/>\n                            <form onSubmit={this.addCategory}>\n                               \n                                <div className=\"div-input\">\n                                    <input className=\"form-control\" type=\"text\" name=\"category_name\" placeholder=\"Category Name\" onChange={this.handleChange} value={this.category_name}/>\n                                    { formErrors.category_nameError &&\n                                        <div class=\"input-errorMsg\">{ formErrors.category_nameError }</div>\n                                    }\n                                </div>\n                                \n                                <div className=\"div-button\">\n                                    <button type=\"submit\" class=\"add-btn\">Create</button>\n                                </div>\n                               \n                            </form>\n                        </div>\n                    \n                        <div className=\"div-class\">\n                            <div className=\"class-table\">\n                                <div className=\"section-title\">\n                                    <h5>Shop Category List</h5>\n                                </div>\n                                <table>\n                                    <thead>\n                                        <tr>\n                                            <th>Id</th>\n                                            <th>Category</th>\n                                            <th>Action</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n\n                                        {\n                                            categories.length ?\n                                                categories.map(category => <tr key={ category.id }>\n                                                    <td>{ category.category_id }</td>\n                                                    <td>{ category.category_name }</td>\n                                                    {/* <td><div className=\"div-action\">\n                                                            <i class=\"fas fa-plus\"></i>\n                                                        </div>\n                                                    </td> */}\n                                                    <td class=\"action-btns\"><button class=\"div-action-btn\" onClick={ this.editCategory.bind(this, category.category_id) }><i class=\"fas fa-pen\"></i></button>\n                                                        <button class=\"div-action-btn\" onClick={ this.openAlert.bind(this, category.category_id) }><i class=\"fas fa-trash\"></i></button></td>\n                                                </tr>) : null\n                                        }\n\n                                    </tbody>\n                                </table>\n                               \n                            </div>\n\n                        </div>\n                       \n                        <Message show={ this.state.message } messageHide={ messageHide }>\n                            <h3>Success !</h3>\n                            <p>{ responseData }</p>\n                            <div className=\"m-footer\">\n                                <button type=\"button\" onClick={ this.closeMessage } className=\"btn-footer\">Ok</button>\n                            </div>\n                        </Message>\n\n                        <Alert show={ this.state.alert } alertHide={ alertHide }>\n                            <h3>Are You Sure<br /><span>You want to Delete this?</span></h3>\n                            <div className=\"m-footer\">\n                                \n                                <button type=\"button\" onClick={ this.deleteCategory.bind(this,this.state.id) } className=\"btn-footer\">Ok</button>\n                                <button type=\"button\" onClick={ this.closeAlertMessage } className=\"btn-footer\">Cancel</button>\n                            </div>\n                        </Alert>\n\n                        <Edit show={ this.state.show } handleClose={ this.closeModal } handleSubmit={ this.handleUpdate } showHide={ showHide }>\n                            <div className=\"container\">\n                                <div>\n                                    <div className=\"div-label\">\n                                        <label>Category Name</label>\n                                    </div>\n                                    <div className=\"div-input\">\n                                        <input className=\"form-control\" type=\"text\" name=\"category_name\" onChange={ this.handleChange } value={ this.state.category_name } required />\n                                    </div>\n                                </div>\n                            </div>\n\n                        </Edit>\n                    </div>\n                   \n                </div>\n            </>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}