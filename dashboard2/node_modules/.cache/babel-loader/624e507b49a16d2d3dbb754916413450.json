{"ast":null,"code":"import _asyncToGenerator from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"D:\\\\Jaya\\\\proj\\\\trial5\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{Component}from'react';import'../../Admin-css/Admin.css';import Axios from'../../../../axios';import Message from'./Message';import Alert from'./AlertMessage';import Edit from'./Edit';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Category=/*#__PURE__*/function(_Component){_inherits(Category,_Component);var _super=_createSuper(Category);function Category(props){var _this;_classCallCheck(this,Category);_this=_super.call(this,props);_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.openModal=function(e){_this.setState({show:true});};_this.closeModal=function(e){_this.setState({show:false});};_this.openMessage=function(e){_this.setState({message:true});};_this.closeMessage=function(e){_this.setState({message:false});_this.refreshPage();};_this.openAlert=function(id){_this.setState({alert:true,id:id});};_this.closeAlertMessage=function(e){_this.setState({alert:false});};_this.addCategory=function(e){e.preventDefault();var isValid=_this.handleFormValidation();if(isValid){var data={post_category:_this.state.post_category};Axios.post('/addPostCategory',data).then(function(response){// console.log(response);\n_this.setState({responseData:response.data.message});_this.openMessage();}).catch(function(error){console.log(error);});}};_this.editCategory=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var editingItem;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:editingItem=_this.state.bcategories.find(function(category){return category.id===id;});// console.log(id);\n_context.next=3;return _this.setState({post_category:editingItem.post_category,editMode:id});case 3:_this.openModal();case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.state={bcategories:[],post_category:'',id:'',responseData:'',show:false,message:false,alert:false,editMode:false,formErrors:{}};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.handleUpdate=_this.handleUpdate.bind(_assertThisInitialized(_this));_this.closeModal=_this.closeModal.bind(_assertThisInitialized(_this));_this.openModal=_this.openModal.bind(_assertThisInitialized(_this));_this.openMessage=_this.openMessage.bind(_assertThisInitialized(_this));_this.closeMessage=_this.closeMessage.bind(_assertThisInitialized(_this));_this.closeAlertMessage=_this.closeAlertMessage.bind(_assertThisInitialized(_this));_this.refreshPage=_this.refreshPage.bind(_assertThisInitialized(_this));_this.handleFormValidation=_this.handleFormValidation.bind(_assertThisInitialized(_this));return _this;}_createClass(Category,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;Axios.get('/getPostCategory').then(function(response){// console.log(response)\n_this2.setState({bcategories:response.data});}).catch(function(error){console.log(error);});}},{key:\"refreshPage\",value:function refreshPage(){window.location.reload(false);}},{key:\"handleFormValidation\",value:function handleFormValidation(){var formErrors={};var isValid=true;var post_category=this.state.post_category;if(post_category===''){formErrors.post_categoryError=\"Category Name is Required!!\";isValid=false;}if(post_category.length===1){formErrors.post_categoryError=\"Category Name must be of of 4 or more\";isValid=false;}if(post_category.length===2){formErrors.post_categoryError=\"Category Name must be of of 4 or more\";isValid=false;}if(post_category.length===3){formErrors.post_categoryError=\"Category Name must be of of 4 or more\";isValid=false;}if(post_category.length>50){formErrors.post_categoryError=\"Category Name must be of length 50\";isValid=false;}if(post_category.match(/[!@/$%^&*(),.?\":{}|<>]/)){formErrors.post_categoryError=\"No Special Characters\";isValid=false;}this.setState({formErrors:formErrors});return isValid;}},{key:\"deleteCategory\",value:function deleteCategory(id){var _this3=this;Axios.delete(\"/deletePostCategory/\".concat(id)).then(function(response){// console.log(response);\n_this3.setState({alert:false,responseData:response.data.message});_this3.openMessage();}).catch(function(error){console.log(error);// console.log(\"error-----\")\n});}},{key:\"handleUpdate\",value:function handleUpdate(e){var _this4=this;e.preventDefault();var id=this.state.editMode;console.log('...handle edit....');this.setState({editMode:true});var data={post_category:this.state.post_category};Axios.put(\"/editPostCategory/\".concat(id),data).then(function(response){// console.log(response);\n_this4.closeModal();_this4.setState({responseData:response.data.message});_this4.openMessage();}).catch(function(error){console.log(error);});}},{key:\"render\",value:function render(){var _this5=this;var showHide=this.state.show?\"edit-form display-block\":\"edit-form display-none\";var messageHide=this.state.message?\"message-box display-block\":\"message-box display-none\";var alertHide=this.state.alert?\"message-box display-block\":\"message-box display-none\";var _this$state=this.state,formErrors=_this$state.formErrors,bcategories=_this$state.bcategories,responseData=_this$state.responseData;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"dash-class\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"class-title\",children:/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/admin_dashboard/blog-category\",children:\"Blog Category\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"section div-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"div-class class-width\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-title\",children:/*#__PURE__*/_jsx(\"h5\",{children:\"Create Blog Category\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.addCategory,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"div-input\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",type:\"text\",name:\"post_category\",placeholder:\"Category Name\",onChange:this.handleChange,value:this.post_category}),formErrors.post_categoryError&&/*#__PURE__*/_jsx(\"div\",{class:\"input-errorMsg\",children:formErrors.post_categoryError})]}),/*#__PURE__*/_jsx(\"div\",{className:\"div-button\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",class:\"add-btn\",children:\"Create\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"div-class\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"class-table\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-title\",children:/*#__PURE__*/_jsx(\"h5\",{children:\"Blog Category List\"})}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Id\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:bcategories.length?bcategories.map(function(category){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:category.id}),/*#__PURE__*/_jsx(\"td\",{children:category.post_category}),/*#__PURE__*/_jsxs(\"td\",{class:\"action-btns\",children:[/*#__PURE__*/_jsx(\"button\",{class:\"div-action-btn\",onClick:_this5.editCategory.bind(_this5,category.id),children:/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-pen\"})}),/*#__PURE__*/_jsx(\"button\",{class:\"div-action-btn\",onClick:_this5.openAlert.bind(_this5,category.id),children:/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-trash\"})})]})]},category.id);}):null})]})]})}),/*#__PURE__*/_jsxs(Message,{show:this.state.message,messageHide:messageHide,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Success !\"}),/*#__PURE__*/_jsx(\"p\",{children:responseData}),/*#__PURE__*/_jsx(\"div\",{className:\"m-footer\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:this.closeMessage,className:\"btn-footer\",children:\"Ok\"})})]}),/*#__PURE__*/_jsxs(Alert,{show:this.state.alert,alertHide:alertHide,children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Are You Sure\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{children:\"You want to Delete this?\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"m-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:this.deleteCategory.bind(this,this.state.id),className:\"btn-footer\",children:\"Ok\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:this.closeAlertMessage,className:\"btn-footer\",children:\"Cancel\"})]})]}),/*#__PURE__*/_jsx(Edit,{show:this.state.show,handleClose:this.closeModal,handleSubmit:this.handleUpdate,showHide:showHide,children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"div-label\",children:/*#__PURE__*/_jsx(\"label\",{children:\"Category Name\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"div-input\",children:/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",type:\"text\",name:\"post_category\",onChange:this.handleChange,value:this.state.post_category,required:true})})]})})})]})]})});}}]);return Category;}(Component);export{Category as default};","map":{"version":3,"sources":["D:/Jaya/proj/trial5/frontend/src/components/AdminDashboard/Blog/Category/Category.js"],"names":["React","Component","Axios","Message","Alert","Edit","Category","props","handleChange","e","setState","target","name","value","openModal","show","closeModal","openMessage","message","closeMessage","refreshPage","openAlert","id","alert","closeAlertMessage","addCategory","preventDefault","isValid","handleFormValidation","data","post_category","state","post","then","response","responseData","catch","error","console","log","editCategory","editingItem","bcategories","find","category","editMode","formErrors","bind","handleUpdate","get","window","location","reload","post_categoryError","length","match","delete","put","showHide","messageHide","alertHide","map","deleteCategory"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport '../../Admin-css/Admin.css'\nimport Axios from '../../../../axios'\n\nimport Message from './Message'\nimport Alert from './AlertMessage'\nimport Edit from './Edit'\n\nexport default class Category extends Component {\n\n    constructor (props) {\n        super(props)\n\n        this.state = {\n            bcategories: [],\n            post_category: '',\n            id: '',\n\n            responseData: '',\n\n            show: false,\n            message: false,\n            alert: false,\n            editMode: false,\n            formErrors: {},\n        }\n\n        this.handleChange = this.handleChange.bind(this);\n        this.handleUpdate = this.handleUpdate.bind(this);\n        this.closeModal = this.closeModal.bind(this);\n        this.openModal = this.openModal.bind(this);\n        this.openMessage = this.openMessage.bind(this);\n        this.closeMessage = this.closeMessage.bind(this);\n        this.closeAlertMessage = this.closeAlertMessage.bind(this);\n        this.refreshPage = this.refreshPage.bind(this);\n        this.handleFormValidation = this.handleFormValidation.bind(this);\n    }\n\n    componentDidMount() {\n\n        Axios.get('/getPostCategory')\n            .then(response => {\n                // console.log(response)\n                this.setState({ bcategories: response.data })\n            })\n            .catch(error => {\n                console.log(error)\n            })\n    }\n\n\n    handleChange = (e) => {\n        this.setState({ [e.target.name]: e.target.value });\n    }\n\n    refreshPage() {\n        window.location.reload(false);\n    }\n\n    openModal = (e) => {\n        this.setState({\n            show: true\n        })\n    }\n\n    closeModal = (e) => {\n        this.setState({\n            show: false\n        })\n    }\n\n    openMessage = (e) => {\n        this.setState({\n            message: true\n        })\n    }\n\n    closeMessage = (e) => {\n        this.setState({\n            message: false,\n        })\n        this.refreshPage();\n    }\n\n\n    openAlert = (id) => {\n        this.setState({\n            alert: true,\n            id: id,\n        })\n    }\n\n    closeAlertMessage = (e) => {\n        this.setState({\n            alert: false,\n\n        })\n    }\n\n    handleFormValidation() {\n        const formErrors = {};\n        let isValid = true;\n\n        const { post_category } = this.state;\n\n        if (post_category === '') {\n            formErrors.post_categoryError = \"Category Name is Required!!\";\n            isValid = false;\n        }\n\n        if (post_category.length === 1) {\n            formErrors.post_categoryError = \"Category Name must be of of 4 or more\";\n            isValid = false;\n        }\n        if (post_category.length === 2) {\n            formErrors.post_categoryError = \"Category Name must be of of 4 or more\";\n            isValid = false;\n        }\n        if (post_category.length === 3) {\n            formErrors.post_categoryError = \"Category Name must be of of 4 or more\";\n            isValid = false;\n        }\n        if (post_category.length > 50) {\n            formErrors.post_categoryError = \"Category Name must be of length 50\";\n            isValid = false;\n        }\n        if (post_category.match(/[!@/$%^&*(),.?\":{}|<>]/)) {\n            formErrors.post_categoryError = \"No Special Characters\";\n            isValid = false;\n        }\n\n        this.setState({ formErrors });\n        return isValid;\n\n    }\n\n\n    addCategory = (e) => {\n        e.preventDefault();\n\n        const isValid = this.handleFormValidation();\n\n        if (isValid) {\n\n            const data ={\n                post_category: this.state.post_category\n            }\n            Axios.post('/addPostCategory', data)\n                .then(response => {\n                    // console.log(response);\n                    this.setState({\n                        responseData: response.data.message\n                    })\n\n                    this.openMessage();\n\n                })\n\n                .catch(error => {\n                    console.log(error);\n                })\n        }\n\n    }\n\n    deleteCategory(id) {\n\n        Axios.delete(`/deletePostCategory/${ id }`)\n            .then(response => {\n                // console.log(response);\n                this.setState({\n                    alert: false,\n                    responseData: response.data.message\n\n                })\n                this.openMessage();\n            })\n            .catch(error => {\n                console.log(error);\n\n                // console.log(\"error-----\")\n            })\n    }\n\n    editCategory = async (id) => {\n       \n\n        let editingItem = this.state.bcategories.find(category => {\n            return category.id === id;\n        })\n        // console.log(id);\n\n        await this.setState({\n            post_category: editingItem.post_category,\n            editMode: id\n        })\n\n        this.openModal();\n    }\n\n\n\n    handleUpdate(e) {\n        e.preventDefault();\n\n        let id = this.state.editMode;\n        console.log('...handle edit....')\n        this.setState({\n            editMode: true,\n\n        })\n        const data = {\n            post_category: this.state.post_category\n        }\n        Axios.put(`/editPostCategory/${ id }`, data)\n            .then(response => {\n                // console.log(response);\n                this.closeModal();\n                this.setState({\n                    responseData: response.data.message\n                })\n                this.openMessage();\n\n            })\n\n            .catch(error => {\n                console.log(error);\n\n            })\n    }\n\n    render() {\n\n        const showHide = this.state.show ? \"edit-form display-block\" : \"edit-form display-none\";\n        const messageHide = this.state.message ? \"message-box display-block\" : \"message-box display-none\";\n        const alertHide = this.state.alert ? \"message-box display-block\" : \"message-box display-none\";\n\n        const { formErrors, bcategories, responseData } = this.state\n\n        return (\n            <>\n                <div className=\"dash-class\">\n                    <div className=\"class-title\">\n                        <h3><a href=\"/admin_dashboard/blog-category\">Blog Category</a></h3>\n                    </div>\n\n                    <div className=\"section div-section\">\n                        <div className=\"div-class class-width\">\n                            <div className=\"section-title\">\n                                <h5>Create Blog Category</h5>\n                            </div><br />\n                            <form onSubmit={ this.addCategory }>\n\n                                <div className=\"div-input\">\n                                    <input className=\"form-control\" type=\"text\" name=\"post_category\" placeholder=\"Category Name\" onChange={ this.handleChange } value={ this.post_category } />\n                                    { formErrors.post_categoryError &&\n                                        <div class=\"input-errorMsg\">{ formErrors.post_categoryError }</div>\n                                    }\n                                </div>\n\n                                <div className=\"div-button\">\n                                    <button type=\"submit\" class=\"add-btn\">Create</button>\n                                </div>\n\n                            </form>\n                        </div>\n\n                        <div className=\"div-class\">\n                            <div className=\"class-table\">\n                                <div className=\"section-title\">\n                                    <h5>Blog Category List</h5>\n                                </div>\n                                <table>\n                                    <thead>\n                                        <tr>\n                                            <th>Id</th>\n                                            <th>Category</th>\n                                            <th>Action</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n\n                                        {\n                                            bcategories.length ?\n                                                bcategories.map(category => <tr key={ category.id }>\n                                                    <td>{ category.id }</td>\n                                                    <td>{ category.post_category }</td>\n                                                    {/* <td><div className=\"div-action\">\n                                                            <i class=\"fas fa-plus\"></i>\n                                                        </div>\n                                                    </td> */}\n                                                    <td class=\"action-btns\"><button class=\"div-action-btn\" onClick={ this.editCategory.bind(this, category.id) }><i class=\"fas fa-pen\"></i></button>\n                                                        <button class=\"div-action-btn\" onClick={ this.openAlert.bind(this, category.id) }><i class=\"fas fa-trash\"></i></button></td>\n                                                </tr>) : null\n                                        }\n\n                                    </tbody>\n                                </table>\n\n                            </div>\n\n                        </div>\n\n                        <Message show={ this.state.message } messageHide={ messageHide }>\n                            <h3>Success !</h3>\n                            <p>{responseData}</p>\n                            <div className=\"m-footer\">\n                                <button type=\"button\" onClick={ this.closeMessage } className=\"btn-footer\">Ok</button>\n                            </div>\n                        </Message>\n\n                        <Alert show={ this.state.alert } alertHide={ alertHide }>\n                            <h3>Are You Sure<br /><span>You want to Delete this?</span></h3>\n                            <div className=\"m-footer\">\n\n                                <button type=\"button\" onClick={ this.deleteCategory.bind(this, this.state.id) } className=\"btn-footer\">Ok</button>\n                                <button type=\"button\" onClick={ this.closeAlertMessage } className=\"btn-footer\">Cancel</button>\n                            </div>\n                        </Alert>\n\n                        <Edit show={ this.state.show } handleClose={ this.closeModal } handleSubmit={ this.handleUpdate } showHide={ showHide }>\n                            <div className=\"container\">\n                                <div>\n                                    <div className=\"div-label\">\n                                        <label>Category Name</label>\n                                    </div>\n                                    <div className=\"div-input\">\n                                        <input className=\"form-control\" type=\"text\" name=\"post_category\" onChange={ this.handleChange } value={ this.state.post_category } required />\n                                    </div>\n                                </div>\n                            </div>\n\n                        </Edit>\n                    </div>\n\n                </div>\n            </>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}