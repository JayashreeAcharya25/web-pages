{"ast":null,"code":"import _asyncToGenerator from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"D:\\\\Jaya\\\\proj\\\\trial5\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{Component}from'react';import'../Admin-css/Admin-Detail.css';import Edit from'./EditUser';import Message from'./Message';import Alert from'./AlertMessage';import Axios from'../../../axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ViewBlog=/*#__PURE__*/function(_Component){_inherits(ViewBlog,_Component);var _super=_createSuper(ViewBlog);function ViewBlog(props){var _this;_classCallCheck(this,ViewBlog);_this=_super.call(this,props);_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.openModal=function(e){_this.setState({show:true});};_this.closeModal=function(e){_this.setState({show:false});};_this.openMessage=function(e){_this.setState({message:true});};_this.closeMessage=function(e){_this.setState({message:false});_this.refreshPage();};_this.openAlertMessage=function(id){_this.setState({alert:true,id:id});};_this.closeAlertMessage=function(e){_this.setState({alert:false});};_this.edituser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var editingItem;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:editingItem=_this.state.users.find(function(user){return user.id===id;});console.log(editingItem);_context.next=4;return _this.setState({username:editingItem.username,phonenumber:editingItem.phonenumber});case 4:_this.openModal();case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.state={users:[],type:'User',username:'',email:'',phonenumber:'',password:'',confirmpassword:'',id:'',show:false,message:false,editMode:false,responseData:'',formErrors:{}};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.handleUpdate=_this.handleUpdate.bind(_assertThisInitialized(_this));_this.closeModal=_this.closeModal.bind(_assertThisInitialized(_this));_this.openModal=_this.openModal.bind(_assertThisInitialized(_this));_this.openMessage=_this.openMessage.bind(_assertThisInitialized(_this));_this.closeMessage=_this.closeMessage.bind(_assertThisInitialized(_this));_this.closeAlertMessage=_this.closeAlertMessage.bind(_assertThisInitialized(_this));_this.refreshPage=_this.refreshPage.bind(_assertThisInitialized(_this));_this.handleFormValidation=_this.handleFormValidation.bind(_assertThisInitialized(_this));return _this;}_createClass(ViewBlog,[{key:\"refreshPage\",value:function refreshPage(){window.location.reload(false);}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;Axios.get('/getUser').then(function(response){_this2.setState({users:response.data});}).catch(function(error){console.log(error);});}},{key:\"handleFormValidation\",value:function handleFormValidation(){var formErrors={};var isValid=true;var _this$state=this.state,username=_this$state.username,phonenumber=_this$state.phonenumber;if(username===''){formErrors.usernameError=\"Username is Required!!\";isValid=false;}if(phonenumber===''){formErrors.phonenumberError=\"Phone Number is Required!!\";isValid=false;}if(username.length===1){formErrors.usernameError=\"Title must be of of 4 or more\";isValid=false;}if(username.length===2){formErrors.usernameError=\"Title must be of of 4 or more\";isValid=false;}if(username.length===3){formErrors.usernameError=\"Title must be of of 4 or more\";isValid=false;}if(username.length>250){formErrors.usernameError=\"Title must be of length 250\";isValid=false;}if(username.match(/[!@/$%^&*(),.?\":{}|<>]/)){formErrors.usernameError=\"No Special Characters\";isValid=false;}this.setState({formErrors:formErrors});return isValid;}},{key:\"deleteUser\",value:function deleteUser(id){var _this3=this;// console.log(this.state);\nAxios.delete(\"/deleteUser/\".concat(id)).then(function(response){_this3.setState({alert:false,responseData:response.data.message});_this3.openMessage();}).catch(function(error){console.log(error);});}},{key:\"handleUpdate\",value:function handleUpdate(e){var _this4=this;e.preventDefault();var isValid=this.handleFormValidation();if(isValid){var id=this.state.editMode;this.setState({editMode:true});var data={username:this.state.username,phonenumber:this.state.phonenumber};Axios.put(\"/edituser/\".concat(id),data).then(function(response){_this4.closeModal();_this4.setState({responseData:response.data.message});_this4.openMessage();}).catch(function(error){console.log(error);});}}},{key:\"render\",value:function render(){var _this5=this;var _this$state2=this.state,formErrors=_this$state2.formErrors,users=_this$state2.users,responseData=_this$state2.responseData;var showHide=this.state.show?\"edit-form display-block\":\"edit-form display-none\";var messageHide=this.state.message?\"message-box display-block\":\"message-box display-none\";var alertHide=this.state.alert?\"message-box display-block\":\"message-box display-none\";return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"class-table\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-title\",children:/*#__PURE__*/_jsx(\"h5\",{children:\"User List\"})}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"User Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Phone Number\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Address\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.length?users.map(function(user){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user.username}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:user.phonenumber}),/*#__PURE__*/_jsx(\"td\",{children:user.address}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{class:\"action-btns\",children:[/*#__PURE__*/_jsx(\"button\",{class:\"div-action-btn\",onClick:_this5.edituser.bind(_this5,user.id),children:/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-pen\"})}),/*#__PURE__*/_jsx(\"button\",{class:\"div-action-btn\",onClick:_this5.openAlertMessage.bind(_this5,user.id),children:/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-trash\"})})]})})]},user.id);}):null})]}),/*#__PURE__*/_jsxs(Edit,{show:this.state.show,handleClose:this.closeModal,handleSubmit:this.handleUpdate,showHide:showHide,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"div-input\",children:[/*#__PURE__*/_jsx(\"input\",{class:\"form-control\",type:\"text\",name:\"username\",onChange:this.handleChange,value:this.state.username,placeholder:\"Username\"}),formErrors.usernameError&&/*#__PURE__*/_jsx(\"div\",{class:\"input-errorMsg\",children:formErrors.usernameError})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"div-input\",children:[/*#__PURE__*/_jsx(\"input\",{class:\"form-control\",type:\"number\",name:\"phonenumber\",onChange:this.handleChange,value:this.state.phonenumber,placeholder:\"Phone Number\"}),formErrors.phonenumberError&&/*#__PURE__*/_jsx(\"div\",{class:\"input-errorMsg\",children:formErrors.phonenumberError})]})]}),/*#__PURE__*/_jsxs(Message,{show:this.state.message,messageHide:messageHide,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Success !\"}),/*#__PURE__*/_jsx(\"p\",{children:responseData}),/*#__PURE__*/_jsx(\"div\",{className:\"m-footer\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:this.closeMessage,className:\"btn-footer\",children:\"Ok\"})})]}),/*#__PURE__*/_jsxs(Alert,{show:this.state.alert,alertHide:alertHide,children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Are You Sure\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{children:\"You want to Delete this?\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"m-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:this.deleteUser.bind(this,this.state.id),className:\"btn-footer\",children:\"Ok\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:this.closeAlertMessage,className:\"btn-footer\",children:\"Cancel\"})]})]})]})});}}]);return ViewBlog;}(Component);export{ViewBlog as default};","map":{"version":3,"sources":["D:/Jaya/proj/trial5/frontend/src/components/AdminDashboard/Users/ViewUser.js"],"names":["React","Component","Edit","Message","Alert","Axios","ViewBlog","props","handleChange","e","setState","target","name","value","openModal","show","closeModal","openMessage","message","closeMessage","refreshPage","openAlertMessage","id","alert","closeAlertMessage","edituser","editingItem","state","users","find","user","console","log","username","phonenumber","type","email","password","confirmpassword","editMode","responseData","formErrors","bind","handleUpdate","handleFormValidation","window","location","reload","get","then","response","data","catch","error","isValid","usernameError","phonenumberError","length","match","delete","preventDefault","put","showHide","messageHide","alertHide","map","address","deleteUser"],"mappings":"85BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAO,+BAAP,CACA,MAAOC,CAAAA,IAAP,KAAiB,YAAjB,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,MAAOC,CAAAA,KAAP,KAAkB,gBAAlB,CAEA,MAAOC,CAAAA,KAAP,KAAkB,gBAAlB,C,gJAEqBC,CAAAA,Q,oGAEjB,kBAAaC,KAAb,CAAoB,0CAChB,uBAAMA,KAAN,EADgB,MAyCpBC,YAzCoB,CAyCL,SAACC,CAAD,CAAO,CAClB,MAAKC,QAAL,oBAAiBD,CAAC,CAACE,MAAF,CAASC,IAA1B,CAAiCH,CAAC,CAACE,MAAF,CAASE,KAA1C,GACH,CA3CmB,OA8DpBC,SA9DoB,CA8DR,SAACL,CAAD,CAAO,CACf,MAAKC,QAAL,CAAc,CACVK,IAAI,CAAE,IADI,CAAd,EAGH,CAlEmB,OAoEpBC,UApEoB,CAoEP,SAACP,CAAD,CAAO,CAChB,MAAKC,QAAL,CAAc,CACVK,IAAI,CAAE,KADI,CAAd,EAGH,CAxEmB,OA0EpBE,WA1EoB,CA0EN,SAACR,CAAD,CAAO,CACjB,MAAKC,QAAL,CAAc,CACVQ,OAAO,CAAE,IADC,CAAd,EAGH,CA9EmB,OAgFpBC,YAhFoB,CAgFL,SAACV,CAAD,CAAO,CAClB,MAAKC,QAAL,CAAc,CACVQ,OAAO,CAAE,KADC,CAAd,EAGA,MAAKE,WAAL,GACH,CArFmB,OAuFpBC,gBAvFoB,CAuFD,SAACC,EAAD,CAAQ,CACvB,MAAKZ,QAAL,CAAc,CACVa,KAAK,CAAE,IADG,CAEVD,EAAE,CAAEA,EAFM,CAAd,EAIH,CA5FmB,OA8FpBE,iBA9FoB,CA8FA,SAACf,CAAD,CAAO,CACvB,MAAKC,QAAL,CAAc,CACVa,KAAK,CAAE,KADG,CAAd,EAIH,CAnGmB,OAsKpBE,QAtKoB,0FAsKT,iBAAOH,EAAP,kIAGHI,WAHG,CAGW,MAAKC,KAAL,CAAWC,KAAX,CAAiBC,IAAjB,CAAsB,SAAAC,IAAI,CAAI,CAC5C,MAAOA,CAAAA,IAAI,CAACR,EAAL,GAAYA,EAAnB,CACH,CAFiB,CAHX,CAOPS,OAAO,CAACC,GAAR,CAAYN,WAAZ,EAPO,sBASD,OAAKhB,QAAL,CAAc,CAChBuB,QAAQ,CAAEP,WAAW,CAACO,QADN,CAGhBC,WAAW,CAAER,WAAW,CAACQ,WAHT,CAAd,CATC,QAeP,MAAKpB,SAAL,GAfO,sDAtKS,+DAGhB,MAAKa,KAAL,CAAa,CAETC,KAAK,CAAE,EAFE,CAGTO,IAAI,CAAE,MAHG,CAITF,QAAQ,CAAE,EAJD,CAKTG,KAAK,CAAE,EALE,CAMTF,WAAW,CAAE,EANJ,CAOTG,QAAQ,CAAE,EAPD,CAQTC,eAAe,CAAE,EARR,CAUThB,EAAE,CAAE,EAVK,CAYTP,IAAI,CAAE,KAZG,CAaTG,OAAO,CAAE,KAbA,CAcTqB,QAAQ,CAAE,KAdD,CAgBTC,YAAY,CAAE,EAhBL,CAmBTC,UAAU,CAAE,EAnBH,CAAb,CAsBA,MAAKjC,YAAL,CAAoB,MAAKA,YAAL,CAAkBkC,IAAlB,+BAApB,CACA,MAAKC,YAAL,CAAoB,MAAKA,YAAL,CAAkBD,IAAlB,+BAApB,CAEA,MAAK1B,UAAL,CAAkB,MAAKA,UAAL,CAAgB0B,IAAhB,+BAAlB,CACA,MAAK5B,SAAL,CAAiB,MAAKA,SAAL,CAAe4B,IAAf,+BAAjB,CAEA,MAAKzB,WAAL,CAAmB,MAAKA,WAAL,CAAiByB,IAAjB,+BAAnB,CACA,MAAKvB,YAAL,CAAoB,MAAKA,YAAL,CAAkBuB,IAAlB,+BAApB,CAEA,MAAKlB,iBAAL,CAAyB,MAAKA,iBAAL,CAAuBkB,IAAvB,+BAAzB,CAEA,MAAKtB,WAAL,CAAmB,MAAKA,WAAL,CAAiBsB,IAAjB,+BAAnB,CAEA,MAAKE,oBAAL,CAA4B,MAAKA,oBAAL,CAA0BF,IAA1B,+BAA5B,CAtCgB,aAuCnB,C,gDAMD,sBAAc,CACVG,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,KAAvB,EACH,C,iCAED,4BAAoB,iBAEhB1C,KAAK,CAAC2C,GAAN,CAAU,UAAV,EACKC,IADL,CACU,SAAAC,QAAQ,CAAI,CAEd,MAAI,CAACxC,QAAL,CAAc,CAAEkB,KAAK,CAAEsB,QAAQ,CAACC,IAAlB,CAAd,EACH,CAJL,EAKKC,KALL,CAKW,SAAAC,KAAK,CAAI,CACZtB,OAAO,CAACC,GAAR,CAAYqB,KAAZ,EACH,CAPL,EAQH,C,oCA2CD,+BAAuB,CACnB,GAAMZ,CAAAA,UAAU,CAAG,EAAnB,CACA,GAAIa,CAAAA,OAAO,CAAG,IAAd,CAEA,gBAAkC,KAAK3B,KAAvC,CAAQM,QAAR,aAAQA,QAAR,CAAkBC,WAAlB,aAAkBA,WAAlB,CAEA,GAAID,QAAQ,GAAK,EAAjB,CAAqB,CACjBQ,UAAU,CAACc,aAAX,CAA2B,wBAA3B,CACAD,OAAO,CAAG,KAAV,CACH,CAED,GAAIpB,WAAW,GAAK,EAApB,CAAwB,CACpBO,UAAU,CAACe,gBAAX,CAA8B,4BAA9B,CACAF,OAAO,CAAG,KAAV,CACH,CAID,GAAIrB,QAAQ,CAACwB,MAAT,GAAoB,CAAxB,CAA2B,CACvBhB,UAAU,CAACc,aAAX,CAA2B,+BAA3B,CACAD,OAAO,CAAG,KAAV,CACH,CACD,GAAIrB,QAAQ,CAACwB,MAAT,GAAoB,CAAxB,CAA2B,CACvBhB,UAAU,CAACc,aAAX,CAA2B,+BAA3B,CACAD,OAAO,CAAG,KAAV,CACH,CACD,GAAIrB,QAAQ,CAACwB,MAAT,GAAoB,CAAxB,CAA2B,CACvBhB,UAAU,CAACc,aAAX,CAA2B,+BAA3B,CACAD,OAAO,CAAG,KAAV,CACH,CACD,GAAIrB,QAAQ,CAACwB,MAAT,CAAkB,GAAtB,CAA2B,CACvBhB,UAAU,CAACc,aAAX,CAA2B,6BAA3B,CACAD,OAAO,CAAG,KAAV,CACH,CACD,GAAIrB,QAAQ,CAACyB,KAAT,CAAe,wBAAf,CAAJ,CAA8C,CAC1CjB,UAAU,CAACc,aAAX,CAA2B,uBAA3B,CACAD,OAAO,CAAG,KAAV,CACH,CAGD,KAAK5C,QAAL,CAAc,CAAE+B,UAAU,CAAVA,UAAF,CAAd,EACA,MAAOa,CAAAA,OAAP,CACH,C,0BAGD,oBAAWhC,EAAX,CAAe,iBAEX;AACAjB,KAAK,CAACsD,MAAN,uBAA6BrC,EAA7B,GACK2B,IADL,CACU,SAAAC,QAAQ,CAAI,CAEd,MAAI,CAACxC,QAAL,CAAc,CACVa,KAAK,CAAE,KADG,CAEViB,YAAY,CAAEU,QAAQ,CAACC,IAAT,CAAcjC,OAFlB,CAAd,EAKA,MAAI,CAACD,WAAL,GACH,CATL,EAUKmC,KAVL,CAUW,SAAAC,KAAK,CAAI,CACZtB,OAAO,CAACC,GAAR,CAAYqB,KAAZ,EAEH,CAbL,EAcH,C,4BAsBD,sBAAa5C,CAAb,CAAgB,iBACZA,CAAC,CAACmD,cAAF,GAEA,GAAMN,CAAAA,OAAO,CAAG,KAAKV,oBAAL,EAAhB,CACA,GAAIU,OAAJ,CAAa,CAET,GAAIhC,CAAAA,EAAE,CAAG,KAAKK,KAAL,CAAWY,QAApB,CAEA,KAAK7B,QAAL,CAAc,CACV6B,QAAQ,CAAE,IADA,CAAd,EAII,GAAMY,CAAAA,IAAI,CAAG,CACTlB,QAAQ,CAAE,KAAKN,KAAL,CAAWM,QADZ,CAETC,WAAW,CAAE,KAAKP,KAAL,CAAWO,WAFf,CAAb,CAIA7B,KAAK,CAACwD,GAAN,qBAAwBvC,EAAxB,EAA+B6B,IAA/B,EACKF,IADL,CACU,SAAAC,QAAQ,CAAI,CAEd,MAAI,CAAClC,UAAL,GAEA,MAAI,CAACN,QAAL,CAAc,CACV8B,YAAY,CAAEU,QAAQ,CAACC,IAAT,CAAcjC,OADlB,CAAd,EAIA,MAAI,CAACD,WAAL,GACH,CAVL,EAYKmC,KAZL,CAYW,SAAAC,KAAK,CAAI,CACZtB,OAAO,CAACC,GAAR,CAAYqB,KAAZ,EAEH,CAfL,EAiBP,CACJ,C,sBAKD,iBAAS,iBAEL,iBAA4C,KAAK1B,KAAjD,CAAQc,UAAR,cAAQA,UAAR,CAAoBb,KAApB,cAAoBA,KAApB,CAA2BY,YAA3B,cAA2BA,YAA3B,CAEA,GAAMsB,CAAAA,QAAQ,CAAG,KAAKnC,KAAL,CAAWZ,IAAX,CAAkB,yBAAlB,CAA8C,wBAA/D,CACA,GAAMgD,CAAAA,WAAW,CAAG,KAAKpC,KAAL,CAAWT,OAAX,CAAqB,2BAArB,CAAmD,0BAAvE,CACA,GAAM8C,CAAAA,SAAS,CAAG,KAAKrC,KAAL,CAAWJ,KAAX,CAAmB,2BAAnB,CAAiD,0BAAnE,CAEA,mBACI,sCACI,aAAK,SAAS,CAAC,aAAf,wBACI,YAAK,SAAS,CAAC,eAAf,uBACI,iCADJ,EADJ,cAII,sCACI,oCACI,mCACI,iCADJ,cAEI,6BAFJ,cAGI,oCAHJ,cAII,+BAJJ,cAKI,8BALJ,GADJ,EADJ,cAUI,uBAGQK,KAAK,CAAC6B,MAAN,CACI7B,KAAK,CAACqC,GAAN,CAAU,SAAAnC,IAAI,qBAAI,mCACd,oBAAMA,IAAI,CAACG,QAAX,EADc,cAEd,oBAAMH,IAAI,CAACM,KAAX,EAFc,cAGd,oBAAMN,IAAI,CAACI,WAAX,EAHc,cAId,oBAAMJ,IAAI,CAACoC,OAAX,EAJc,cAMd,iCACI,aAAK,KAAK,CAAC,aAAX,wBACI,eAAQ,KAAK,CAAC,gBAAd,CAA+B,OAAO,CAAG,MAAI,CAACzC,QAAL,CAAciB,IAAd,CAAmB,MAAnB,CAAyBZ,IAAI,CAACR,EAA9B,CAAzC,uBAA6E,UAAG,KAAK,CAAC,YAAT,EAA7E,EADJ,cAEI,eAAQ,KAAK,CAAC,gBAAd,CAA+B,OAAO,CAAG,MAAI,CAACD,gBAAL,CAAsBqB,IAAtB,CAA2B,MAA3B,CAAiCZ,IAAI,CAACR,EAAtC,CAAzC,uBAAsF,UAAG,KAAK,CAAC,cAAT,EAAtF,EAFJ,GADJ,EANc,GAAUQ,IAAI,CAACR,EAAf,CAAJ,EAAd,CADJ,CAaa,IAhBrB,EAVJ,GAJJ,cAmCI,MAAC,IAAD,EAAM,IAAI,CAAG,KAAKK,KAAL,CAAWZ,IAAxB,CAA+B,WAAW,CAAG,KAAKC,UAAlD,CAA+D,YAAY,CAAG,KAAK2B,YAAnF,CAAkG,QAAQ,CAAGmB,QAA7G,wBAEI,aAAK,SAAS,CAAC,WAAf,wBACI,cAAO,KAAK,CAAC,cAAb,CAA4B,IAAI,CAAC,MAAjC,CAAwC,IAAI,CAAC,UAA7C,CAAwD,QAAQ,CAAG,KAAKtD,YAAxE,CAAuF,KAAK,CAAG,KAAKmB,KAAL,CAAWM,QAA1G,CAAqH,WAAW,CAAC,UAAjI,EADJ,CAEMQ,UAAU,CAACc,aAAX,eACE,YAAK,KAAK,CAAC,gBAAX,UAA8Bd,UAAU,CAACc,aAAzC,EAHR,GAFJ,cAQI,aAAK,SAAS,CAAC,WAAf,wBACI,cAAO,KAAK,CAAC,cAAb,CAA4B,IAAI,CAAC,QAAjC,CAA0C,IAAI,CAAC,aAA/C,CAA6D,QAAQ,CAAG,KAAK/C,YAA7E,CAA4F,KAAK,CAAG,KAAKmB,KAAL,CAAWO,WAA/G,CAA6H,WAAW,CAAC,cAAzI,EADJ,CAEMO,UAAU,CAACe,gBAAX,eACE,YAAK,KAAK,CAAC,gBAAX,UAA8Bf,UAAU,CAACe,gBAAzC,EAHR,GARJ,GAnCJ,cAmDI,MAAC,OAAD,EAAS,IAAI,CAAG,KAAK7B,KAAL,CAAWT,OAA3B,CAAqC,WAAW,CAAG6C,WAAnD,wBACI,iCADJ,cAEI,mBAAKvB,YAAL,EAFJ,cAGI,YAAK,SAAS,CAAC,UAAf,uBACI,eAAQ,IAAI,CAAC,QAAb,CAAsB,OAAO,CAAG,KAAKrB,YAArC,CAAoD,SAAS,CAAC,YAA9D,gBADJ,EAHJ,GAnDJ,cA2DI,MAAC,KAAD,EAAO,IAAI,CAAG,KAAKQ,KAAL,CAAWJ,KAAzB,CAAiC,SAAS,CAAGyC,SAA7C,wBACI,kDAAgB,aAAhB,cAAsB,kDAAtB,GADJ,cAEI,aAAK,SAAS,CAAC,UAAf,wBAEI,eAAQ,IAAI,CAAC,QAAb,CAAsB,OAAO,CAAG,KAAKG,UAAL,CAAgBzB,IAAhB,CAAqB,IAArB,CAA2B,KAAKf,KAAL,CAAWL,EAAtC,CAAhC,CAA4E,SAAS,CAAC,YAAtF,gBAFJ,cAGI,eAAQ,IAAI,CAAC,QAAb,CAAsB,OAAO,CAAG,KAAKE,iBAArC,CAAyD,SAAS,CAAC,YAAnE,oBAHJ,GAFJ,GA3DJ,GADJ,EADJ,CAyEH,C,sBApTiCvB,S,SAAjBK,Q","sourcesContent":["import React, { Component } from 'react'\nimport '../Admin-css/Admin-Detail.css'\nimport Edit from './EditUser'\nimport Message from './Message'\nimport Alert from './AlertMessage'\n\nimport Axios from '../../../axios'\n\nexport default class ViewBlog extends Component {\n\n    constructor (props) {\n        super(props)\n\n        this.state = {\n\n            users: [],\n            type: 'User',\n            username: '',\n            email: '',\n            phonenumber: '',\n            password: '',\n            confirmpassword: '',\n\n            id: '',\n\n            show: false,\n            message: false,\n            editMode: false,\n\n            responseData: '',\n\n            \n            formErrors: {},\n        }\n     \n        this.handleChange = this.handleChange.bind(this);\n        this.handleUpdate = this.handleUpdate.bind(this);\n\n        this.closeModal = this.closeModal.bind(this);\n        this.openModal = this.openModal.bind(this);\n\n        this.openMessage = this.openMessage.bind(this);\n        this.closeMessage = this.closeMessage.bind(this);\n\n        this.closeAlertMessage = this.closeAlertMessage.bind(this);\n        \n        this.refreshPage = this.refreshPage.bind(this);\n\n        this.handleFormValidation = this.handleFormValidation.bind(this);\n    }\n\n    handleChange = (e) => {\n        this.setState({ [e.target.name]: e.target.value });\n    }\n\n    refreshPage() {\n        window.location.reload(false);\n    }\n\n    componentDidMount() {\n\n        Axios.get('/getUser')\n            .then(response => {\n\n                this.setState({ users: response.data })\n            })\n            .catch(error => {\n                console.log(error)\n            })\n    }\n\n\n    openModal = (e) => {\n        this.setState({\n            show: true\n        })\n    }\n\n    closeModal = (e) => {\n        this.setState({\n            show: false\n        })\n    }\n\n    openMessage = (e) => {\n        this.setState({\n            message: true,\n        })\n    }\n\n    closeMessage = (e) => {\n        this.setState({\n            message: false,\n        })\n        this.refreshPage();\n    }\n\n    openAlertMessage = (id) => {\n        this.setState({\n            alert: true,\n            id: id,\n        })\n    }\n\n    closeAlertMessage = (e) => {\n        this.setState({\n            alert: false,\n\n        })\n    }\n\n\n    handleFormValidation() {\n        const formErrors = {};\n        let isValid = true;\n\n        const { username, phonenumber } = this.state\n\n        if (username === '') {\n            formErrors.usernameError = \"Username is Required!!\";\n            isValid = false;\n        }\n\n        if (phonenumber === '') {\n            formErrors.phonenumberError = \"Phone Number is Required!!\";\n            isValid = false;\n        }\n\n\n\n        if (username.length === 1) {\n            formErrors.usernameError = \"Title must be of of 4 or more\";\n            isValid = false;\n        }\n        if (username.length === 2) {\n            formErrors.usernameError = \"Title must be of of 4 or more\";\n            isValid = false;\n        }\n        if (username.length === 3) {\n            formErrors.usernameError = \"Title must be of of 4 or more\";\n            isValid = false;\n        }\n        if (username.length > 250) {\n            formErrors.usernameError = \"Title must be of length 250\";\n            isValid = false;\n        }\n        if (username.match(/[!@/$%^&*(),.?\":{}|<>]/)) {\n            formErrors.usernameError = \"No Special Characters\";\n            isValid = false;\n        }\n\n\n        this.setState({ formErrors });\n        return isValid;\n    }\n\n\n    deleteUser(id) {\n\n        // console.log(this.state);\n        Axios.delete(`/deleteUser/${ id }`)\n            .then(response => {\n\n                this.setState({\n                    alert: false,\n                    responseData: response.data.message\n                })\n\n                this.openMessage();\n            })\n            .catch(error => {\n                console.log(error);\n               \n            })\n    }\n\n    edituser = async (id) => {\n\n\n        let editingItem = this.state.users.find(user => {\n            return user.id === id;\n        })\n\n        console.log(editingItem)\n      \n        await this.setState({\n            username: editingItem.username,\n\n            phonenumber: editingItem.phonenumber,\n        })\n\n        this.openModal();\n\n    }\n\n\n    handleUpdate(e) {\n        e.preventDefault();\n\n        const isValid = this.handleFormValidation();\n        if (isValid) {\n\n            let id = this.state.editMode;\n\n            this.setState({\n                editMode: true,\n            })\n\n                const data = {\n                    username: this.state.username,\n                    phonenumber: this.state.phonenumber,\n                }\n                Axios.put(`/edituser/${ id }`, data)\n                    .then(response => {\n\n                        this.closeModal();\n\n                        this.setState({\n                            responseData: response.data.message\n                        })\n\n                        this.openMessage();\n                    })\n\n                    .catch(error => {\n                        console.log(error);\n\n                    })\n            \n        }\n    }\n\n   \n\n\n    render() {\n\n        const { formErrors, users, responseData } = this.state\n\n        const showHide = this.state.show ? \"edit-form display-block\" : \"edit-form display-none\";\n        const messageHide = this.state.message ? \"message-box display-block\" : \"message-box display-none\";\n        const alertHide = this.state.alert ? \"message-box display-block\" : \"message-box display-none\";\n\n        return (\n            <>\n                <div className=\"class-table\">\n                    <div className=\"section-title\">\n                        <h5>User List</h5>\n                    </div>\n                    <table>\n                        <thead>\n                            <tr>\n                                <th>User Name</th>\n                                <th>Email</th>\n                                <th>Phone Number</th>\n                                <th>Address</th>\n                                <th>Action</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n\n                            {\n                                users.length ?\n                                    users.map(user => <tr key={ user.id }>\n                                        <td>{ user.username }</td>\n                                        <td>{ user.email }</td>\n                                        <td>{ user.phonenumber }</td>\n                                        <td>{ user.address }</td>\n\n                                        <td>\n                                            <div class=\"action-btns\">\n                                                <button class=\"div-action-btn\" onClick={ this.edituser.bind(this, user.id) }><i class=\"fas fa-pen\"></i></button>\n                                                <button class=\"div-action-btn\" onClick={ this.openAlertMessage.bind(this, user.id) } ><i class=\"fas fa-trash\"></i></button>\n                                            </div>\n                                        </td>\n                                    </tr>) : null\n                            }\n\n                        </tbody>\n                    </table>\n                    <Edit show={ this.state.show } handleClose={ this.closeModal } handleSubmit={ this.handleUpdate } showHide={ showHide }>\n                        \n                        <div className=\"div-input\">\n                            <input class=\"form-control\" type=\"text\" name=\"username\" onChange={ this.handleChange } value={ this.state.username } placeholder=\"Username\" />\n                            { formErrors.usernameError &&\n                                <div class=\"input-errorMsg\">{ formErrors.usernameError }</div>\n                            }\n                        </div>\n                        <div className=\"div-input\">\n                            <input class=\"form-control\" type=\"number\" name=\"phonenumber\" onChange={ this.handleChange } value={ this.state.phonenumber } placeholder=\"Phone Number\" />\n                            { formErrors.phonenumberError &&\n                                <div class=\"input-errorMsg\">{ formErrors.phonenumberError }</div>\n                            }\n                        </div>\n                    </Edit>\n\n                    <Message show={ this.state.message } messageHide={ messageHide }>\n                        <h3>Success !</h3>\n                        <p>{ responseData }</p>\n                        <div className=\"m-footer\">\n                            <button type=\"button\" onClick={ this.closeMessage } className=\"btn-footer\">Ok</button>\n                        </div>\n                    </Message>\n\n                    <Alert show={ this.state.alert } alertHide={ alertHide }>\n                        <h3>Are You Sure<br /><span>You want to Delete this?</span></h3>\n                        <div className=\"m-footer\">\n\n                            <button type=\"button\" onClick={ this.deleteUser.bind(this, this.state.id) } className=\"btn-footer\">Ok</button>\n                            <button type=\"button\" onClick={ this.closeAlertMessage } className=\"btn-footer\">Cancel</button>\n                        </div>\n                    </Alert>\n                </div>\n\n            </>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}