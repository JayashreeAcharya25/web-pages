{"ast":null,"code":"import _defineProperty from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import Axios from'../../../../axios';import'../../Admin-css/Admin-Detail.css';import Message from'./Message';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var editForm=/*#__PURE__*/function(_Component){_inherits(editForm,_Component);var _super=_createSuper(editForm);function editForm(props){var _this;_classCallCheck(this,editForm);_this=_super.call(this,props);_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.openMessage=function(e){_this.setState({message:true});};_this.closeMessage=function(e){_this.setState({message:false});_this.refreshPage();};_this.handleSubmit=function(e){e.preventDefault();var isValid=_this.handleFormValidation();if(isValid){if(_this.state.setImage===1){console.log(_this.state.setImage);var data=new FormData();data.append('post_name',_this.state.post_name);data.append('post_category',_this.state.post_category);data.append('post_subcategory',_this.state.post_subcategory);data.append('post_image',_this.state.post_image);data.append('post_description',_this.state.post_description);data.append('post_date',_this.state.post_date);data.append('post_authname',_this.state.post_authname);Axios.post(\"/addPost/\".concat(_this.state.setImage),data).then(function(response){// console.log(response);\n_this.setState({responseData:response.data.message});_this.openMessage();}).catch(function(error){console.log(error);});}else if(_this.state.setImage===0){var _data={post_name:_this.state.post_name,post_category:_this.state.post_category,post_subcategory:_this.state.post_subcategory,post_description:_this.state.post_description,post_date:_this.state.post_date,post_authname:_this.state.post_authname};Axios.post(\"/addPost\",_data).then(function(response){// console.log(response);\n_this.setState({responseData:response.data.message});_this.openMessage();}).catch(function(error){console.log(error);});}}};var setImage=0;_this.state={blogpost:[],bcategories:[],post_name:'',post_category:'',post_subcategory:'',post_image:null,post_description:'',post_date:new Date().toLocaleString(),post_authname:'',message:'',responseData:'',formErrors:{},setImage:setImage};_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.openMessage=_this.openMessage.bind(_assertThisInitialized(_this));_this.closeMessage=_this.closeMessage.bind(_assertThisInitialized(_this));_this.onUpload=_this.onUpload.bind(_assertThisInitialized(_this));_this.refreshPage=_this.refreshPage.bind(_assertThisInitialized(_this));_this.handleFormValidation=_this.handleFormValidation.bind(_assertThisInitialized(_this));return _this;}_createClass(editForm,[{key:\"refreshPage\",value:function refreshPage(){window.location.reload(false);}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;Axios.get('/getPost').then(function(response){// console.log(response)\n_this2.setState({blogpost:response.data});}).catch(function(error){console.log(error);});Axios.get('/getPostCategory').then(function(response){// console.log(response)\n_this2.setState({bcategories:response.data});}).catch(function(error){console.log(error);});}},{key:\"onUpload\",value:function onUpload(e){this.setState({post_image:e.target.files[0],setImage:1});console.log(e.target.files[0]);}},{key:\"handleFormValidation\",value:function handleFormValidation(){var formErrors={};var isValid=true;var _this$state=this.state,post_name=_this$state.post_name,post_category=_this$state.post_category,post_subcategory=_this$state.post_subcategory,post_description=_this$state.post_description,post_authname=_this$state.post_authname;if(post_name===''){formErrors.post_nameError=\"Blog Title is Required!!\";isValid=false;}if(post_category===''){formErrors.post_categoryError=\"Blog Category is Required!!\";isValid=false;}if(post_subcategory===''){formErrors.post_subcategoryError=\"Blog Sub Category is Required!!\";isValid=false;}if(post_description===''){formErrors.post_descriptionError=\"Blog Description is Required!!\";isValid=false;}if(post_authname===''){formErrors.post_authnameError=\"Name is Required!!\";isValid=false;}if(post_subcategory.length===1){formErrors.post_subcategoryError=\"Sub Category must be of of 4 or more\";isValid=false;}if(post_subcategory.length===2){formErrors.post_subcategoryError=\"Sub Category must be of of 4 or more\";isValid=false;}if(post_subcategory.length===3){formErrors.post_subcategoryError=\"Sub Category must be of of 4 or more\";isValid=false;}if(post_subcategory.length>50){formErrors.post_subcategoryError=\"Sub Category must be of length 50\";isValid=false;}if(post_subcategory.match(/[!@/$%^&*(),.?\":{}|<>]/)){formErrors.post_subcategoryError=\"No Special Characters\";isValid=false;}if(post_name.length===1){formErrors.post_nameError=\"Title must be of of 4 or more\";isValid=false;}if(post_name.length===2){formErrors.post_nameError=\"Title must be of of 4 or more\";isValid=false;}if(post_name.length===3){formErrors.post_nameError=\"Title must be of of 4 or more\";isValid=false;}if(post_name.length>250){formErrors.post_nameError=\"Title must be of length 250\";isValid=false;}if(post_name.match(/[!@/$%^&*(),.?\":{}|<>]/)){formErrors.post_nameError=\"No Special Characters\";isValid=false;}if(post_description.length>2000){formErrors.post_descriptionError=\"Description must be of length 2000\";isValid=false;}if(post_description.length<10){formErrors.post_descriptionError=\"Description must be of 10 or more\";isValid=false;}if(post_authname.length===1){formErrors.post_authnameError=\"Name must be of of 4 or more\";isValid=false;}if(post_authname.length===2){formErrors.post_authnameError=\"Name must be of of 4 or more\";isValid=false;}if(post_authname.length===3){formErrors.post_authnameError=\"Name must be of of 4 or more\";isValid=false;}if(post_authname.length>30){formErrors.post_authnameError=\"Name must be of length 30\";isValid=false;}if(post_authname.match(/[!@/$%^&*(),.?\":{}|<>]/)){formErrors.post_authnameError=\"No Special Characters\";isValid=false;}this.setState({formErrors:formErrors});return isValid;}},{key:\"render\",value:function render(){var _this$state2=this.state,formErrors=_this$state2.formErrors,bcategories=_this$state2.bcategories,responseData=_this$state2.responseData;var messageHide=this.state.message?\"message-box display-block\":\"message-box display-none\";if(!this.props.show){return null;}return/*#__PURE__*/_jsxs(\"div\",{className:this.props.showHide,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Add Blog Details\"}),/*#__PURE__*/_jsx(\"i\",{class:\"fal fa-times\",onClick:this.props.handleClose})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid-3-col\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-box\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"div-input\",children:[/*#__PURE__*/_jsx(\"input\",{class:\"form-control\",type:\"text\",name:\"post_name\",onChange:this.handleChange,value:this.post_name,placeholder:\"Blog Title\"}),formErrors.post_nameError&&/*#__PURE__*/_jsx(\"div\",{class:\"input-errorMsg\",children:formErrors.post_nameError})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-box\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"div-input\",children:[/*#__PURE__*/_jsxs(\"select\",{class:\"form-control\",onChange:this.handleChange,name:\"post_category\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"Blog Category\"}),bcategories.length?bcategories.map(function(category){return/*#__PURE__*/_jsx(\"option\",{name:category.post_category,value:category.post_category,children:category.post_category},category.id);}):null]}),formErrors.post_categoryError&&/*#__PURE__*/_jsx(\"div\",{class:\"input-errorMsg\",children:formErrors.post_categoryError})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-box\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"div-input\",children:[/*#__PURE__*/_jsx(\"input\",{class:\"form-control\",type:\"text\",name:\"post_subcategory\",onChange:this.handleChange,value:this.post_subcategory,placeholder:\"Blog Sub Category\"}),formErrors.post_subcategoryError&&/*#__PURE__*/_jsx(\"div\",{class:\"input-errorMsg\",children:formErrors.post_subcategoryError})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-box\",children:/*#__PURE__*/_jsx(\"div\",{className:\"div-input\",children:/*#__PURE__*/_jsx(\"input\",{class:\"form-control\",type:\"file\",onChange:this.onUpload,name:\"post_image\",value:this.post_image,accept:\".png, .jpg\",placeholder:\"Image\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-box\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"div-input\",children:[/*#__PURE__*/_jsx(\"textarea\",{rows:\"1\",class:\"form-control\",type:\"text\",name:\"post_description\",onChange:this.handleChange,value:this.post_description,placeholder:\"Blog Description\"}),formErrors.post_descriptionError&&/*#__PURE__*/_jsx(\"div\",{class:\"input-errorMsg\",children:formErrors.post_descriptionError})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-box\",children:/*#__PURE__*/_jsx(\"div\",{className:\"div-input\",children:/*#__PURE__*/_jsx(\"input\",{class:\"form-control\",name:\"post_date\",value:this.state.post_date,accept:\".png, .jpg\",disabled:true})})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-box\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"div-input\",children:[/*#__PURE__*/_jsx(\"input\",{class:\"form-control\",type:\"text\",name:\"post_authname\",onChange:this.handleChange,value:this.post_authname,placeholder:\"Your Name\"}),formErrors.post_authnameError&&/*#__PURE__*/_jsx(\"div\",{class:\"input-errorMsg\",children:formErrors.post_authnameError})]})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:this.handleSubmit,class:\"btn-footer\",children:\"Submit\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:this.props.handleClose,className:\"btn-footer\",children:\"Cancel\"})]})]})]}),/*#__PURE__*/_jsxs(Message,{show:this.state.message,messageHide:messageHide,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Success !\"}),/*#__PURE__*/_jsx(\"p\",{children:responseData}),/*#__PURE__*/_jsx(\"div\",{className:\"m-footer\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:this.closeMessage,className:\"btn-footer\",children:\"Ok\"})})]})]});}}]);return editForm;}(Component);export{editForm as default};","map":{"version":3,"sources":["D:/Jaya/proj/trial5/frontend/src/components/AdminDashboard/Blog/Content/AddBlog.js"],"names":["React","Component","Axios","Message","editForm","props","handleChange","e","setState","target","name","value","openMessage","message","closeMessage","refreshPage","handleSubmit","preventDefault","isValid","handleFormValidation","state","setImage","console","log","data","FormData","append","post_name","post_category","post_subcategory","post_image","post_description","post_date","post_authname","post","then","response","responseData","catch","error","blogpost","bcategories","Date","toLocaleString","formErrors","bind","onUpload","window","location","reload","get","files","post_nameError","post_categoryError","post_subcategoryError","post_descriptionError","post_authnameError","length","match","messageHide","show","showHide","handleClose","map","category","id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Axios from '../../../../axios'\nimport '../../Admin-css/Admin-Detail.css'\nimport Message from './Message'\n\nexport default class editForm extends Component {\n\n    constructor(props) {\n        super(props)\n\n        let setImage = 0\n\n        this.state = {\n            blogpost: [],\n            bcategories: [],\n\n            post_name: '',\n            post_category: '',\n            post_subcategory: '',\n            post_image: null,\n            post_description: '',\n            post_date: new Date().toLocaleString(),\n            post_authname: '',\n            \n            message: '',\n\n            responseData: '',\n            \n            formErrors: {},\n\n            setImage,\n        }\n\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n       \n        this.openMessage = this.openMessage.bind(this);\n        this.closeMessage = this.closeMessage.bind(this);\n        \n        this.onUpload = this.onUpload.bind(this);\n\n        this.refreshPage = this.refreshPage.bind(this);\n        this.handleFormValidation = this.handleFormValidation.bind(this);\n    }\n    \n    handleChange = (e) => {\n        this.setState({ [e.target.name]: e.target.value });\n    }\n\n    refreshPage() {\n        window.location.reload(false);\n    }\n\n    componentDidMount() {\n\n        Axios.get('/getPost')\n            .then(response => {\n                // console.log(response)\n                this.setState({ blogpost: response.data })\n            })\n            .catch(error => {\n                console.log(error)\n            })\n\n        Axios.get('/getPostCategory')\n            .then(response => {\n                // console.log(response)\n                this.setState({ bcategories: response.data })\n            })\n            .catch(error => {\n                console.log(error)\n            })\n    }\n\n    onUpload(e) {\n        \n        this.setState({\n            post_image: e.target.files[0],\n            setImage: 1,\n        })\n        console.log(e.target.files[0]);\n    }\n\n    openMessage = (e) => {\n        this.setState({\n            message: true,\n        })\n    }\n\n    closeMessage = (e) => {\n        this.setState({\n            message: false,\n        })\n        this.refreshPage();\n    }\n\n    \n    handleFormValidation() {\n        const formErrors = {};\n        let isValid = true;\n\n        const { post_name, post_category, post_subcategory, post_description, post_authname } = this.state\n\n        if (post_name === '') {\n            formErrors.post_nameError = \"Blog Title is Required!!\";\n            isValid = false;\n        }\n        if (post_category === '') {\n            formErrors.post_categoryError = \"Blog Category is Required!!\";\n            isValid = false;\n        }\n        if (post_subcategory === '') {\n            formErrors.post_subcategoryError = \"Blog Sub Category is Required!!\";\n            isValid = false;\n        }\n        if (post_description === '') {\n            formErrors.post_descriptionError = \"Blog Description is Required!!\";\n            isValid = false;\n        }\n        if (post_authname === '') {\n            formErrors.post_authnameError = \"Name is Required!!\";\n            isValid = false;\n        }\n\n\n        if (post_subcategory.length === 1) {\n            formErrors.post_subcategoryError = \"Sub Category must be of of 4 or more\";\n            isValid = false;\n        }\n        if (post_subcategory.length === 2) {\n            formErrors.post_subcategoryError = \"Sub Category must be of of 4 or more\";\n            isValid = false;\n        }\n        if (post_subcategory.length === 3) {\n            formErrors.post_subcategoryError = \"Sub Category must be of of 4 or more\";\n            isValid = false;\n        }\n        if (post_subcategory.length > 50) {\n            formErrors.post_subcategoryError = \"Sub Category must be of length 50\";\n            isValid = false;\n        }\n        if (post_subcategory.match(/[!@/$%^&*(),.?\":{}|<>]/)) {\n            formErrors.post_subcategoryError = \"No Special Characters\";\n            isValid = false;\n        }\n\n        if (post_name.length === 1) {\n            formErrors.post_nameError = \"Title must be of of 4 or more\";\n            isValid = false;\n        }\n        if (post_name.length === 2) {\n            formErrors.post_nameError = \"Title must be of of 4 or more\";\n            isValid = false;\n        }\n        if (post_name.length === 3) {\n            formErrors.post_nameError = \"Title must be of of 4 or more\";\n            isValid = false;\n        }\n        if (post_name.length > 250) {\n            formErrors.post_nameError = \"Title must be of length 250\";\n            isValid = false;\n        }\n        if (post_name.match(/[!@/$%^&*(),.?\":{}|<>]/)) {\n            formErrors.post_nameError = \"No Special Characters\";\n            isValid = false;\n        }\n\n        if (post_description.length > 2000) {\n            formErrors.post_descriptionError = \"Description must be of length 2000\";\n            isValid = false;\n        }\n        if (post_description.length < 10) {\n            formErrors.post_descriptionError = \"Description must be of 10 or more\";\n            isValid = false;\n        }\n\n        if (post_authname.length === 1) {\n            formErrors.post_authnameError = \"Name must be of of 4 or more\";\n            isValid = false;\n        }\n        if (post_authname.length === 2) {\n            formErrors.post_authnameError = \"Name must be of of 4 or more\";\n            isValid = false;\n        }\n        if (post_authname.length === 3) {\n            formErrors.post_authnameError = \"Name must be of of 4 or more\";\n            isValid = false;\n        }\n        if (post_authname.length > 30) {\n            formErrors.post_authnameError = \"Name must be of length 30\";\n            isValid = false;\n        }\n        if (post_authname.match(/[!@/$%^&*(),.?\":{}|<>]/)) {\n            formErrors.post_authnameError = \"No Special Characters\";\n            isValid = false;\n        }\n\n\n\n        this.setState({ formErrors });\n        return isValid;\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault();\n\n        const isValid = this.handleFormValidation();\n\n        if (isValid) {\n            if(this.state.setImage === 1){\n\n            console.log(this.state.setImage);\n            let data = new FormData();\n            data.append('post_name', this.state.post_name);\n            data.append('post_category', this.state.post_category);\n            data.append('post_subcategory', this.state.post_subcategory);\n            data.append('post_image', this.state.post_image);\n            data.append('post_description', this.state.post_description);\n            data.append('post_date', this.state.post_date);\n            data.append('post_authname', this.state.post_authname);\n\n\n            Axios.post(`/addPost/${ this.state.setImage}`, data)\n                .then(response => {\n                    // console.log(response);\n                    this.setState({\n                        responseData: response.data.message\n                    })\n                    this.openMessage();\n                   \n                })\n                .catch(error => {\n                    console.log(error);\n                })\n            }\n\n            else if(this.state.setImage === 0){\n\n                const data = {\n                    post_name: this.state.post_name,\n                    post_category: this.state.post_category,\n                    post_subcategory: this.state.post_subcategory,\n                    post_description: this.state.post_description,\n                    post_date: this.state.post_date,\n                    post_authname: this.state.post_authname,\n                    \n                }\n                Axios.post(`/addPost`, data)\n                    .then(response => {\n                        // console.log(response);\n                        this.setState({\n                            responseData: response.data.message\n                        })\n                        this.openMessage();\n\n                    })\n                    .catch(error => {\n                        console.log(error);\n                    })\n            }\n        }\n    }\n\n    \n\n\n    render() {\n\n        const { formErrors, bcategories, responseData } = this.state\n        const messageHide = this.state.message ? \"message-box display-block\" : \"message-box display-none\";\n\n        if (!this.props.show) {\n            return null;\n        }\n        return (\n            <div className={ this.props.showHide }>\n                <div className=\"modal-wrapper\" >\n                    <div className=\"modal-header\">\n                        <h4>Add Blog Details</h4>\n                        <i class=\"fal fa-times\" onClick={ this.props.handleClose }></i>\n                    </div>\n                    <div className=\"modal-content\">\n                        <div className=\"modal-body\">\n                            <div className=\"grid-3-col\">\n                                <div className=\"form-box\">\n                                    \n                                    <div className=\"div-input\">\n                                        <input class=\"form-control\" type=\"text\" name=\"post_name\" onChange={ this.handleChange } value={ this.post_name } placeholder=\"Blog Title\"/>\n                                        { formErrors.post_nameError &&\n                                            <div class=\"input-errorMsg\">{ formErrors.post_nameError }</div>\n                                        }\n                                    </div>\n                                </div>\n                                <div className=\"form-box\">\n                                    \n                                    <div className=\"div-input\">\n                                        <select class=\"form-control\" onChange={ this.handleChange } name=\"post_category\">\n                                            <option>Blog Category</option>{\n                                                bcategories.length ?\n                                                    bcategories.map(category =>\n\n                                                        <option name={ category.post_category } value={ category.post_category } key={ category.id }>{ category.post_category }</option>\n                                                    ) : null\n                                            }\n                                        </select>\n                                        { formErrors.post_categoryError &&\n                                            <div class=\"input-errorMsg\">{ formErrors.post_categoryError }</div>\n                                        }\n                                    </div>\n                                </div>\n                                <div className=\"form-box\">\n                                   \n                                    <div className=\"div-input\">\n                                        <input class=\"form-control\" type=\"text\" name=\"post_subcategory\" onChange={ this.handleChange } value={ this.post_subcategory } placeholder=\"Blog Sub Category\"/>\n                                        { formErrors.post_subcategoryError &&\n                                            <div class=\"input-errorMsg\">{ formErrors.post_subcategoryError }</div>\n                                        }\n                                    </div>\n                                </div>\n                                <div className=\"form-box\">\n                                    \n                                    <div className=\"div-input\">\n                                        <input class=\"form-control\" type=\"file\" onChange={ this.onUpload } name=\"post_image\" value={ this.post_image } accept=\".png, .jpg\" placeholder=\"Image\"/>\n                                    </div>\n                                </div>\n                                <div className=\"form-box\">\n                                    \n                                    <div className=\"div-input\">\n                                        <textarea rows=\"1\" class=\"form-control\" type=\"text\" name=\"post_description\" onChange={ this.handleChange } value={ this.post_description } placeholder=\"Blog Description\"/>\n                                        { formErrors.post_descriptionError &&\n                                            <div class=\"input-errorMsg\">{ formErrors.post_descriptionError }</div>\n                                        }\n                                    </div>\n                                </div>\n                                <div className=\"form-box\">\n                                    \n                                    <div className=\"div-input\">\n                                        <input class=\"form-control\" name=\"post_date\" value={ this.state.post_date } accept=\".png, .jpg\" disabled/>\n                                    </div>\n                                </div>\n                                <div className=\"form-box\">\n                                    \n                                    <div className=\"div-input\">\n                                        <input class=\"form-control\" type=\"text\" name=\"post_authname\" onChange={ this.handleChange } value={ this.post_authname } placeholder=\"Your Name\"/>\n                                        { formErrors.post_authnameError &&\n                                            <div class=\"input-errorMsg\">{ formErrors.post_authnameError }</div>\n                                        }\n                                    </div>\n                                </div>\n\n                            </div>\n                        </div>\n                        <div className=\"modal-footer\">\n                            <button type=\"submit\" onClick={ this.handleSubmit } class=\"btn-footer\">Submit</button>\n                            <button type=\"button\" onClick={ this.props.handleClose } className=\"btn-footer\">Cancel</button>\n                        </div>\n                    </div>\n                </div>\n                <Message show={ this.state.message } messageHide={ messageHide }>\n                    <h3>Success !</h3>\n                    <p>{ responseData }</p>\n                    <div className=\"m-footer\">\n                        <button type=\"button\" onClick={ this.closeMessage } className=\"btn-footer\">Ok</button>\n                    </div>\n                </Message>\n            </div>\n        );\n\n    }\n}\n"]},"metadata":{},"sourceType":"module"}