{"ast":null,"code":"import _defineProperty from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import Axios from'../../../../axios';import'../../Admin-css/Admin-Detail.css';import Message from'./Message';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddNews=/*#__PURE__*/function(_Component){_inherits(AddNews,_Component);var _super=_createSuper(AddNews);function AddNews(props){var _this;_classCallCheck(this,AddNews);_this=_super.call(this,props);_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.openMessage=function(e){_this.setState({message:true});};_this.closeMessage=function(e){_this.setState({message:false});_this.refreshPage();};_this.handleSubmit=function(e){e.preventDefault();var isValid=_this.handleFormValidation();if(isValid){if(_this.state.setImage===1){var data=new FormData();data.append('title',_this.state.title);data.append('news_category',_this.state.news_category);data.append('news_subcategory',_this.state.news_subcategory);data.append('content',_this.state.content);data.append('image',_this.state.image);data.append('source',_this.state.source);console.log(_this.state);Axios.post(\"/addNews/\".concat(_this.state.setImage),data).then(function(response){console.log(response);_this.setState({successMsg:true});_this.refreshPage();}).catch(function(error){console.log(error);});}else if(_this.state.setImage===0){var _data={title:_this.state.title,news_category:_this.state.news_category,news_subcategory:_this.state.news_subcategory,content:_this.state.content,image:_this.state.image,source:_this.state.source};Axios.post('/addNews',_data).then(function(response){console.log(response);_this.setState({successMsg:true});_this.refreshPage();}).catch(function(error){console.log(error);});}}};var setImage=0;_this.state={ncategories:[],title:'',news_category:'',news_subcategory:'',content:'',image:null,source:'',message:'',responseData:'',formErrors:{},setImage:setImage};_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.openMessage=_this.openMessage.bind(_assertThisInitialized(_this));_this.closeMessage=_this.closeMessage.bind(_assertThisInitialized(_this));_this.onUpload=_this.onUpload.bind(_assertThisInitialized(_this));_this.refreshPage=_this.refreshPage.bind(_assertThisInitialized(_this));_this.handleFormValidation=_this.handleFormValidation.bind(_assertThisInitialized(_this));return _this;}_createClass(AddNews,[{key:\"refreshPage\",value:function refreshPage(){window.location.reload(false);}},{key:\"onUpload\",value:function onUpload(e){// let file = e.target.files[0];\nthis.setState({image:e.target.files[0],setImage:1});console.log(e.target.files[0]);}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;Axios.get('/getNewsCategory').then(function(response){// console.log(response)\n_this2.setState({ncategories:response.data});}).catch(function(error){console.log(error);});}},{key:\"handleFormValidation\",value:function handleFormValidation(){var formErrors={};var isValid=true;var _this$state=this.state,title=_this$state.title,news_category=_this$state.news_category,content=_this$state.content;if(title===''){formErrors.titleError=\"News Title is Required!!\";isValid=false;}if(news_category===''){formErrors.news_categoryError=\"News Category is Required!!\";isValid=false;}if(content===''){formErrors.contentError=\"Description is Required!!\";isValid=false;}if(title.length===1){formErrors.titleError=\"Title must be of of 4 or more\";isValid=false;}if(title.length===2){formErrors.titleError=\"Title must be of of 4 or more\";isValid=false;}if(title.length===3){formErrors.titleError=\"Title must be of of 4 or more\";isValid=false;}if(title.length>250){formErrors.titleError=\"Title must be of length 250\";isValid=false;}if(content.length>2000){formErrors.contentError=\"Description must be of length 2000\";isValid=false;}if(content.length<10){formErrors.contentError=\"Description must be of 10 or more\";isValid=false;}this.setState({formErrors:formErrors});return isValid;}},{key:\"render\",value:function render(){var _this$state2=this.state,formErrors=_this$state2.formErrors,ncategories=_this$state2.ncategories,responseData=_this$state2.responseData;var messageHide=this.state.message?\"message-box display-block\":\"message-box display-none\";if(!this.props.show){return null;}return/*#__PURE__*/_jsxs(\"div\",{className:this.props.showHide,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Add News Details\"}),/*#__PURE__*/_jsx(\"i\",{class:\"fal fa-times\",onClick:this.props.handleClose})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid-3-col\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-box\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"div-input\",children:[/*#__PURE__*/_jsx(\"input\",{class:\"form-control\",type:\"text\",name:\"title\",onChange:this.handleChange,value:this.title,placeholder:\"Title\"}),formErrors.titleError&&/*#__PURE__*/_jsx(\"div\",{class:\"input-errorMsg\",children:formErrors.titleError})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-box\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"div-input\",children:[/*#__PURE__*/_jsxs(\"select\",{class:\"form-control\",onChange:this.handleChange,name:\"news_category\",placeholder:\"Category\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"Select Category\"}),ncategories.length?ncategories.map(function(category){return/*#__PURE__*/_jsx(\"option\",{name:category.news_category,value:category.news_category,children:category.news_category},category.nc_id);}):null]}),formErrors.news_categoryError&&/*#__PURE__*/_jsx(\"div\",{class:\"input-errorMsg\",children:formErrors.news_categoryError})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-box\",children:/*#__PURE__*/_jsx(\"div\",{className:\"div-input\",children:/*#__PURE__*/_jsx(\"input\",{class:\"form-control\",type:\"text\",name:\"news_subcategory\",onChange:this.handleChange,value:this.news_subcategory,placeholder:\"Sub Category\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-box\",children:/*#__PURE__*/_jsx(\"div\",{className:\"div-input\",children:/*#__PURE__*/_jsx(\"input\",{class:\"form-control\",type:\"text\",name:\"source\",onChange:this.handleChange,value:this.source,placeholder:\"Source Link\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-box\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"div-input\",children:[/*#__PURE__*/_jsx(\"textarea\",{rows:\"1\",class:\"form-control\",type:\"text\",name:\"content\",onChange:this.handleChange,value:this.content,placeholder:\"Description\"}),formErrors.contentError&&/*#__PURE__*/_jsx(\"div\",{class:\"input-errorMsg\",children:formErrors.contentError})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-box\",children:/*#__PURE__*/_jsx(\"div\",{className:\"div-input\",children:/*#__PURE__*/_jsx(\"input\",{class:\"form-control\",type:\"file\",onChange:this.onUpload,name:\"image\",value:this.image,accept:\".png, .jpg\",placeholder:\"Image\"})})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:this.handleSubmit,class:\"btn-footer\",children:\"Submit\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:this.props.handleClose,className:\"btn-footer\",children:\"Cancel\"})]})]})]}),/*#__PURE__*/_jsxs(Message,{show:this.state.message,messageHide:messageHide,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Success !\"}),/*#__PURE__*/_jsx(\"p\",{children:responseData}),/*#__PURE__*/_jsx(\"div\",{className:\"m-footer\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:this.closeMessage,className:\"btn-footer\",children:\"Ok\"})})]})]});}}]);return AddNews;}(Component);export{AddNews as default};","map":{"version":3,"sources":["D:/Jaya/proj/trial5/frontend/src/components/AdminDashboard/News/Content/AddNews.js"],"names":["React","Component","Axios","Message","AddNews","props","handleChange","e","setState","target","name","value","openMessage","message","closeMessage","refreshPage","handleSubmit","preventDefault","isValid","handleFormValidation","state","setImage","data","FormData","append","title","news_category","news_subcategory","content","image","source","console","log","post","then","response","successMsg","catch","error","ncategories","responseData","formErrors","bind","onUpload","window","location","reload","files","get","titleError","news_categoryError","contentError","length","messageHide","show","showHide","handleClose","map","category","nc_id"],"mappings":"8qBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,mBAAlB,CACA,MAAO,kCAAP,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,C,2FAEqBC,CAAAA,O,kGAEjB,iBAAaC,KAAb,CAAoB,yCAChB,uBAAMA,KAAN,EADgB,MAoCpBC,YApCoB,CAoCL,SAACC,CAAD,CAAO,CAClB,MAAKC,QAAL,oBAAiBD,CAAC,CAACE,MAAF,CAASC,IAA1B,CAAiCH,CAAC,CAACE,MAAF,CAASE,KAA1C,GACH,CAtCmB,OA4CpBC,WA5CoB,CA4CN,SAACL,CAAD,CAAO,CACjB,MAAKC,QAAL,CAAc,CACVK,OAAO,CAAE,IADC,CAAd,EAGH,CAhDmB,OAkDpBC,YAlDoB,CAkDL,SAACP,CAAD,CAAO,CAClB,MAAKC,QAAL,CAAc,CACVK,OAAO,CAAE,KADC,CAAd,EAGA,MAAKE,WAAL,GACH,CAvDmB,OAmIpBC,YAnIoB,CAmIL,SAACT,CAAD,CAAO,CAClBA,CAAC,CAACU,cAAF,GAEA,GAAMC,CAAAA,OAAO,CAAG,MAAKC,oBAAL,EAAhB,CAEA,GAAID,OAAJ,CAAa,CACT,GAAI,MAAKE,KAAL,CAAWC,QAAX,GAAwB,CAA5B,CAA+B,CAE3B,GAAIC,CAAAA,IAAI,CAAG,GAAIC,CAAAA,QAAJ,EAAX,CAEAD,IAAI,CAACE,MAAL,CAAY,OAAZ,CAAqB,MAAKJ,KAAL,CAAWK,KAAhC,EACAH,IAAI,CAACE,MAAL,CAAY,eAAZ,CAA6B,MAAKJ,KAAL,CAAWM,aAAxC,EACAJ,IAAI,CAACE,MAAL,CAAY,kBAAZ,CAAgC,MAAKJ,KAAL,CAAWO,gBAA3C,EACAL,IAAI,CAACE,MAAL,CAAY,SAAZ,CAAuB,MAAKJ,KAAL,CAAWQ,OAAlC,EACAN,IAAI,CAACE,MAAL,CAAY,OAAZ,CAAqB,MAAKJ,KAAL,CAAWS,KAAhC,EACAP,IAAI,CAACE,MAAL,CAAY,QAAZ,CAAsB,MAAKJ,KAAL,CAAWU,MAAjC,EAEAC,OAAO,CAACC,GAAR,CAAY,MAAKZ,KAAjB,EACAlB,KAAK,CAAC+B,IAAN,oBAAwB,MAAKb,KAAL,CAAWC,QAAnC,EAA+CC,IAA/C,EACKY,IADL,CACU,SAAAC,QAAQ,CAAI,CACdJ,OAAO,CAACC,GAAR,CAAYG,QAAZ,EACA,MAAK3B,QAAL,CAAc,CACV4B,UAAU,CAAE,IADF,CAAd,EAIA,MAAKrB,WAAL,GACH,CARL,EAUKsB,KAVL,CAUW,SAAAC,KAAK,CAAI,CACZP,OAAO,CAACC,GAAR,CAAYM,KAAZ,EACH,CAZL,EAaH,CAzBD,IA0BK,IAAI,MAAKlB,KAAL,CAAWC,QAAX,GAAwB,CAA5B,CAA+B,CAEhC,GAAMC,CAAAA,KAAI,CAAG,CACTG,KAAK,CAAE,MAAKL,KAAL,CAAWK,KADT,CAETC,aAAa,CAAE,MAAKN,KAAL,CAAWM,aAFjB,CAGTC,gBAAgB,CAAE,MAAKP,KAAL,CAAWO,gBAHpB,CAITC,OAAO,CAAE,MAAKR,KAAL,CAAWQ,OAJX,CAKTC,KAAK,CAAE,MAAKT,KAAL,CAAWS,KALT,CAMTC,MAAM,CAAE,MAAKV,KAAL,CAAWU,MANV,CAAb,CAUA5B,KAAK,CAAC+B,IAAN,CAAW,UAAX,CAAuBX,KAAvB,EACKY,IADL,CACU,SAAAC,QAAQ,CAAI,CACdJ,OAAO,CAACC,GAAR,CAAYG,QAAZ,EACA,MAAK3B,QAAL,CAAc,CACV4B,UAAU,CAAE,IADF,CAAd,EAIA,MAAKrB,WAAL,GACH,CARL,EAUKsB,KAVL,CAUW,SAAAC,KAAK,CAAI,CACZP,OAAO,CAACC,GAAR,CAAYM,KAAZ,EACH,CAZL,EAcH,CACJ,CAEJ,CAhMmB,CAEhB,GAAIjB,CAAAA,QAAQ,CAAG,CAAf,CAEA,MAAKD,KAAL,CAAa,CAETmB,WAAW,CAAE,EAFJ,CAITd,KAAK,CAAE,EAJE,CAKTC,aAAa,CAAE,EALN,CAMTC,gBAAgB,CAAE,EANT,CAOTC,OAAO,CAAE,EAPA,CAQTC,KAAK,CAAE,IARE,CASTC,MAAM,CAAE,EATC,CAWTjB,OAAO,CAAE,EAXA,CAaT2B,YAAY,CAAE,EAbL,CAeTC,UAAU,CAAE,EAfH,CAiBTpB,QAAQ,CAARA,QAjBS,CAAb,CAoBA,MAAKL,YAAL,CAAoB,MAAKA,YAAL,CAAkB0B,IAAlB,+BAApB,CACA,MAAKpC,YAAL,CAAoB,MAAKA,YAAL,CAAkBoC,IAAlB,+BAApB,CAEA,MAAK9B,WAAL,CAAmB,MAAKA,WAAL,CAAiB8B,IAAjB,+BAAnB,CACA,MAAK5B,YAAL,CAAoB,MAAKA,YAAL,CAAkB4B,IAAlB,+BAApB,CAEA,MAAKC,QAAL,CAAgB,MAAKA,QAAL,CAAcD,IAAd,+BAAhB,CAEA,MAAK3B,WAAL,CAAmB,MAAKA,WAAL,CAAiB2B,IAAjB,+BAAnB,CACA,MAAKvB,oBAAL,CAA4B,MAAKA,oBAAL,CAA0BuB,IAA1B,+BAA5B,CAjCgB,aAkCnB,C,+CAMD,sBAAc,CACVE,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,KAAvB,EACH,C,wBAeD,kBAASvC,CAAT,CAAY,CACR;AACA,KAAKC,QAAL,CAAc,CACVqB,KAAK,CAAEtB,CAAC,CAACE,MAAF,CAASsC,KAAT,CAAe,CAAf,CADG,CAEV1B,QAAQ,CAAE,CAFA,CAAd,EAIAU,OAAO,CAACC,GAAR,CAAYzB,CAAC,CAACE,MAAF,CAASsC,KAAT,CAAe,CAAf,CAAZ,EACH,C,iCAED,4BAAmB,iBAEf7C,KAAK,CAAC8C,GAAN,CAAU,kBAAV,EACKd,IADL,CACU,SAAAC,QAAQ,CAAI,CACd;AACA,MAAI,CAAC3B,QAAL,CAAc,CAAE+B,WAAW,CAAEJ,QAAQ,CAACb,IAAxB,CAAd,EACH,CAJL,EAKKe,KALL,CAKW,SAAAC,KAAK,CAAI,CACZP,OAAO,CAACC,GAAR,CAAYM,KAAZ,EACH,CAPL,EAQH,C,oCAED,+BAAuB,CACnB,GAAMG,CAAAA,UAAU,CAAG,EAAnB,CACA,GAAIvB,CAAAA,OAAO,CAAG,IAAd,CAEA,gBAA0C,KAAKE,KAA/C,CAAQK,KAAR,aAAQA,KAAR,CAAeC,aAAf,aAAeA,aAAf,CAA8BE,OAA9B,aAA8BA,OAA9B,CAEA,GAAIH,KAAK,GAAK,EAAd,CAAkB,CACdgB,UAAU,CAACQ,UAAX,CAAwB,0BAAxB,CACA/B,OAAO,CAAG,KAAV,CACH,CACD,GAAIQ,aAAa,GAAK,EAAtB,CAA0B,CACtBe,UAAU,CAACS,kBAAX,CAAgC,6BAAhC,CACAhC,OAAO,CAAG,KAAV,CACH,CAED,GAAIU,OAAO,GAAK,EAAhB,CAAoB,CAChBa,UAAU,CAACU,YAAX,CAA0B,2BAA1B,CACAjC,OAAO,CAAG,KAAV,CACH,CAGD,GAAIO,KAAK,CAAC2B,MAAN,GAAiB,CAArB,CAAwB,CACpBX,UAAU,CAACQ,UAAX,CAAwB,+BAAxB,CACA/B,OAAO,CAAG,KAAV,CACH,CACD,GAAIO,KAAK,CAAC2B,MAAN,GAAiB,CAArB,CAAwB,CACpBX,UAAU,CAACQ,UAAX,CAAwB,+BAAxB,CACA/B,OAAO,CAAG,KAAV,CACH,CACD,GAAIO,KAAK,CAAC2B,MAAN,GAAiB,CAArB,CAAwB,CACpBX,UAAU,CAACQ,UAAX,CAAwB,+BAAxB,CACA/B,OAAO,CAAG,KAAV,CACH,CACD,GAAIO,KAAK,CAAC2B,MAAN,CAAe,GAAnB,CAAwB,CACpBX,UAAU,CAACQ,UAAX,CAAwB,6BAAxB,CACA/B,OAAO,CAAG,KAAV,CACH,CAGD,GAAIU,OAAO,CAACwB,MAAR,CAAiB,IAArB,CAA2B,CACvBX,UAAU,CAACU,YAAX,CAA0B,oCAA1B,CACAjC,OAAO,CAAG,KAAV,CACH,CACD,GAAIU,OAAO,CAACwB,MAAR,CAAiB,EAArB,CAAyB,CACrBX,UAAU,CAACU,YAAX,CAA0B,mCAA1B,CACAjC,OAAO,CAAG,KAAV,CACH,CAGD,KAAKV,QAAL,CAAc,CAAEiC,UAAU,CAAVA,UAAF,CAAd,EACA,MAAOvB,CAAAA,OAAP,CACH,C,sBAiED,iBAAS,CAEL,iBAAkD,KAAKE,KAAvD,CAAQqB,UAAR,cAAQA,UAAR,CAAoBF,WAApB,cAAoBA,WAApB,CAAiCC,YAAjC,cAAiCA,YAAjC,CACA,GAAMa,CAAAA,WAAW,CAAG,KAAKjC,KAAL,CAAWP,OAAX,CAAqB,2BAArB,CAAmD,0BAAvE,CAEA,GAAI,CAAC,KAAKR,KAAL,CAAWiD,IAAhB,CAAsB,CAClB,MAAO,KAAP,CACH,CAED,mBACI,aAAK,SAAS,CAAG,KAAKjD,KAAL,CAAWkD,QAA5B,wBACI,aAAK,SAAS,CAAC,eAAf,wBACI,aAAK,SAAS,CAAC,cAAf,wBACI,wCADJ,cAEI,UAAG,KAAK,CAAC,cAAT,CAAwB,OAAO,CAAG,KAAKlD,KAAL,CAAWmD,WAA7C,EAFJ,GADJ,cAKI,aAAK,SAAS,CAAC,eAAf,wBACI,YAAK,SAAS,CAAC,YAAf,uBACI,aAAK,SAAS,CAAC,YAAf,wBACI,YAAK,SAAS,CAAC,UAAf,uBAEI,aAAK,SAAS,CAAC,WAAf,wBACI,cAAO,KAAK,CAAC,cAAb,CAA4B,IAAI,CAAC,MAAjC,CAAwC,IAAI,CAAC,OAA7C,CAAqD,QAAQ,CAAG,KAAKlD,YAArE,CAAoF,KAAK,CAAG,KAAKmB,KAAjG,CAA0G,WAAW,CAAC,OAAtH,EADJ,CAEMgB,UAAU,CAACQ,UAAX,eACE,YAAK,KAAK,CAAC,gBAAX,UAA8BR,UAAU,CAACQ,UAAzC,EAHR,GAFJ,EADJ,cAUI,YAAK,SAAS,CAAC,UAAf,uBAEI,aAAK,SAAS,CAAC,WAAf,wBACI,gBAAQ,KAAK,CAAC,cAAd,CAA6B,QAAQ,CAAG,KAAK3C,YAA7C,CAA4D,IAAI,CAAC,eAAjE,CAAiF,WAAW,CAAC,UAA7F,wBACI,2CADJ,CAEQiC,WAAW,CAACa,MAAZ,CACIb,WAAW,CAACkB,GAAZ,CAAgB,SAAAC,QAAQ,qBAEpB,eAAQ,IAAI,CAAGA,QAAQ,CAAChC,aAAxB,CAAwC,KAAK,CAAGgC,QAAQ,CAAChC,aAAzD,UAAkGgC,QAAQ,CAAChC,aAA3G,EAA+EgC,QAAQ,CAACC,KAAxF,CAFoB,EAAxB,CADJ,CAIQ,IANhB,GADJ,CAUMlB,UAAU,CAACS,kBAAX,eACE,YAAK,KAAK,CAAC,gBAAX,UAA8BT,UAAU,CAACS,kBAAzC,EAXR,GAFJ,EAVJ,cA4BI,YAAK,SAAS,CAAC,UAAf,uBAEI,YAAK,SAAS,CAAC,WAAf,uBACI,cAAO,KAAK,CAAC,cAAb,CAA4B,IAAI,CAAC,MAAjC,CAAwC,IAAI,CAAC,kBAA7C,CAAgE,QAAQ,CAAG,KAAK5C,YAAhF,CAA+F,KAAK,CAAG,KAAKqB,gBAA5G,CAA+H,WAAW,CAAC,cAA3I,EADJ,EAFJ,EA5BJ,cAmCI,YAAK,SAAS,CAAC,UAAf,uBAEI,YAAK,SAAS,CAAC,WAAf,uBACI,cAAO,KAAK,CAAC,cAAb,CAA4B,IAAI,CAAC,MAAjC,CAAwC,IAAI,CAAC,QAA7C,CAAsD,QAAQ,CAAG,KAAKrB,YAAtE,CAAqF,KAAK,CAAG,KAAKwB,MAAlG,CAA2G,WAAW,CAAC,aAAvH,EADJ,EAFJ,EAnCJ,cAyCI,YAAK,SAAS,CAAC,UAAf,uBAEI,aAAK,SAAS,CAAC,WAAf,wBACI,iBAAU,IAAI,CAAC,GAAf,CAAmB,KAAK,CAAC,cAAzB,CAAwC,IAAI,CAAC,MAA7C,CAAoD,IAAI,CAAC,SAAzD,CAAmE,QAAQ,CAAG,KAAKxB,YAAnF,CAAkG,KAAK,CAAG,KAAKsB,OAA/G,CAAyH,WAAW,CAAC,aAArI,EADJ,CAEMa,UAAU,CAACU,YAAX,eACE,YAAK,KAAK,CAAC,gBAAX,UAA8BV,UAAU,CAACU,YAAzC,EAHR,GAFJ,EAzCJ,cAkDI,YAAK,SAAS,CAAC,UAAf,uBAEI,YAAK,SAAS,CAAC,WAAf,uBACI,cAAO,KAAK,CAAC,cAAb,CAA4B,IAAI,CAAC,MAAjC,CAAwC,QAAQ,CAAG,KAAKR,QAAxD,CAAmE,IAAI,CAAC,OAAxE,CAAgF,KAAK,CAAG,KAAKd,KAA7F,CAAqG,MAAM,CAAC,YAA5G,CAAyH,WAAW,CAAC,OAArI,EADJ,EAFJ,EAlDJ,GADJ,EADJ,cA4DI,aAAK,SAAS,CAAC,cAAf,wBACI,eAAQ,IAAI,CAAC,QAAb,CAAsB,OAAO,CAAG,KAAKb,YAArC,CAAoD,KAAK,CAAC,YAA1D,oBADJ,cAEI,eAAQ,IAAI,CAAC,QAAb,CAAsB,OAAO,CAAG,KAAKX,KAAL,CAAWmD,WAA3C,CAAyD,SAAS,CAAC,YAAnE,oBAFJ,GA5DJ,GALJ,GADJ,cAwEI,MAAC,OAAD,EAAS,IAAI,CAAG,KAAKpC,KAAL,CAAWP,OAA3B,CAAqC,WAAW,CAAGwC,WAAnD,wBACI,iCADJ,cAEI,mBAAKb,YAAL,EAFJ,cAGI,YAAK,SAAS,CAAC,UAAf,uBACI,eAAQ,IAAI,CAAC,QAAb,CAAsB,OAAO,CAAG,KAAK1B,YAArC,CAAoD,SAAS,CAAC,YAA9D,gBADJ,EAHJ,GAxEJ,GADJ,CAkFH,C,qBA/RgCb,S,SAAhBG,O","sourcesContent":["import React, { Component } from 'react'\nimport Axios from '../../../../axios'\nimport '../../Admin-css/Admin-Detail.css'\nimport Message from './Message'\n\nexport default class AddNews extends Component {\n\n    constructor (props) {\n        super(props)\n        let setImage = 0\n\n        this.state = {\n            \n            ncategories: [],\n\n            title: '',\n            news_category: '',\n            news_subcategory: '',\n            content: '',\n            image: null,\n            source: '',\n\n            message: '',\n\n            responseData: '',\n\n            formErrors: {},\n\n            setImage,\n            \n        }\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n\n        this.openMessage = this.openMessage.bind(this);\n        this.closeMessage = this.closeMessage.bind(this);\n\n        this.onUpload = this.onUpload.bind(this);\n\n        this.refreshPage = this.refreshPage.bind(this);\n        this.handleFormValidation = this.handleFormValidation.bind(this);\n    }\n\n    handleChange = (e) => {\n        this.setState({ [e.target.name]: e.target.value });\n    }\n\n    refreshPage() {\n        window.location.reload(false);\n    }\n\n    openMessage = (e) => {\n        this.setState({\n            message: true,\n        })\n    }\n\n    closeMessage = (e) => {\n        this.setState({\n            message: false,\n        })\n        this.refreshPage();\n    }\n\n    onUpload(e) {\n        // let file = e.target.files[0];\n        this.setState({\n            image: e.target.files[0],\n            setImage: 1,\n        })\n        console.log(e.target.files[0]);\n    }\n\n    componentDidMount(){\n\n        Axios.get('/getNewsCategory')\n            .then(response => {\n                // console.log(response)\n                this.setState({ ncategories: response.data })\n            })\n            .catch(error => {\n                console.log(error)\n            })\n    }\n\n    handleFormValidation() {\n        const formErrors = {};\n        let isValid = true;\n\n        const { title, news_category, content } = this.state\n\n        if (title === '') {\n            formErrors.titleError = \"News Title is Required!!\";\n            isValid = false;\n        }\n        if (news_category === '') {\n            formErrors.news_categoryError = \"News Category is Required!!\";\n            isValid = false;\n        }\n        \n        if (content === '') {\n            formErrors.contentError = \"Description is Required!!\";\n            isValid = false;\n        }\n        \n\n        if (title.length === 1) {\n            formErrors.titleError = \"Title must be of of 4 or more\";\n            isValid = false;\n        }\n        if (title.length === 2) {\n            formErrors.titleError = \"Title must be of of 4 or more\";\n            isValid = false;\n        }\n        if (title.length === 3) {\n            formErrors.titleError = \"Title must be of of 4 or more\";\n            isValid = false;\n        }\n        if (title.length > 250) {\n            formErrors.titleError = \"Title must be of length 250\";\n            isValid = false;\n        }\n       \n\n        if (content.length > 2000) {\n            formErrors.contentError = \"Description must be of length 2000\";\n            isValid = false;\n        }\n        if (content.length < 10) {\n            formErrors.contentError = \"Description must be of 10 or more\";\n            isValid = false;\n        }\n\n\n        this.setState({ formErrors });\n        return isValid;\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault();\n\n        const isValid = this.handleFormValidation();\n\n        if (isValid) {\n            if (this.state.setImage === 1) {\n\n                let data = new FormData();\n\n                data.append('title', this.state.title);\n                data.append('news_category', this.state.news_category);\n                data.append('news_subcategory', this.state.news_subcategory);\n                data.append('content', this.state.content);\n                data.append('image', this.state.image);\n                data.append('source', this.state.source);\n\n                console.log(this.state);\n                Axios.post(`/addNews/${ this.state.setImage}`, data)\n                    .then(response => {\n                        console.log(response);\n                        this.setState({\n                            successMsg: true,\n\n                        })\n                        this.refreshPage();\n                    })\n\n                    .catch(error => {\n                        console.log(error);\n                    })\n            }\n            else if (this.state.setImage === 0) {\n\n                const data = {\n                    title: this.state.title,\n                    news_category: this.state.news_category,\n                    news_subcategory: this.state.news_subcategory,\n                    content: this.state.content,\n                    image: this.state.image,\n                    source: this.state.source,\n\n                }\n\n                Axios.post('/addNews', data)\n                    .then(response => {\n                        console.log(response);\n                        this.setState({\n                            successMsg: true,\n\n                        })\n                        this.refreshPage();\n                    })\n\n                    .catch(error => {\n                        console.log(error);\n                    })\n\n            }\n        }\n\n    }\n\n    render() {\n\n        const { formErrors, ncategories, responseData } = this.state\n        const messageHide = this.state.message ? \"message-box display-block\" : \"message-box display-none\";\n\n        if (!this.props.show) {\n            return null;\n        }\n\n        return (\n            <div className={ this.props.showHide }>\n                <div className=\"modal-wrapper\" >\n                    <div className=\"modal-header\">\n                        <h4>Add News Details</h4>\n                        <i class=\"fal fa-times\" onClick={ this.props.handleClose }></i>\n                    </div>\n                    <div className=\"modal-content\">\n                        <div className=\"modal-body\">\n                            <div className=\"grid-3-col\">\n                                <div className=\"form-box\">\n                                    \n                                    <div className=\"div-input\">\n                                        <input class=\"form-control\" type=\"text\" name=\"title\" onChange={ this.handleChange } value={ this.title }  placeholder=\"Title\"/>\n                                        { formErrors.titleError &&\n                                            <div class=\"input-errorMsg\">{ formErrors.titleError }</div>\n                                        }\n                                    </div>\n                                </div>\n                                <div className=\"form-box\">\n                                    \n                                    <div className=\"div-input\">\n                                        <select class=\"form-control\" onChange={ this.handleChange } name=\"news_category\" placeholder=\"Category\">\n                                            <option>Select Category</option>{\n                                                ncategories.length ?\n                                                    ncategories.map(category =>\n\n                                                        <option name={ category.news_category } value={ category.news_category } key={ category.nc_id }>{ category.news_category }</option>\n                                                    ) : null\n                                            }\n                                        </select>\n                                        { formErrors.news_categoryError &&\n                                            <div class=\"input-errorMsg\">{ formErrors.news_categoryError }</div>\n                                        }\n                                    </div>\n                                </div>\n\n                                <div className=\"form-box\">\n                                    \n                                    <div className=\"div-input\">\n                                        <input class=\"form-control\" type=\"text\" name=\"news_subcategory\" onChange={ this.handleChange } value={ this.news_subcategory } placeholder=\"Sub Category\"/>\n                                    </div>\n                                </div>\n\n                                <div className=\"form-box\">\n                                   \n                                    <div className=\"div-input\">\n                                        <input class=\"form-control\" type=\"text\" name=\"source\" onChange={ this.handleChange } value={ this.source } placeholder=\"Source Link\" />\n                                    </div>\n                                </div>\n                                <div className=\"form-box\">\n                                    \n                                    <div className=\"div-input\">\n                                        <textarea rows=\"1\" class=\"form-control\" type=\"text\" name=\"content\" onChange={ this.handleChange } value={ this.content } placeholder=\"Description\"/>\n                                        { formErrors.contentError &&\n                                            <div class=\"input-errorMsg\">{ formErrors.contentError }</div>\n                                        }\n                                    </div>\n                                </div>\n                                <div className=\"form-box\">\n                                    \n                                    <div className=\"div-input\">\n                                        <input class=\"form-control\" type=\"file\" onChange={ this.onUpload } name=\"image\" value={ this.image } accept=\".png, .jpg\" placeholder=\"Image\"/>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"modal-footer\">\n                            <button type=\"submit\" onClick={ this.handleSubmit } class=\"btn-footer\">Submit</button>\n                            <button type=\"button\" onClick={ this.props.handleClose } className=\"btn-footer\">Cancel</button>\n                        </div>\n                    </div>\n                </div>\n                <Message show={ this.state.message } messageHide={ messageHide }>\n                    <h3>Success !</h3>\n                    <p>{ responseData }</p>\n                    <div className=\"m-footer\">\n                        <button type=\"button\" onClick={ this.closeMessage } className=\"btn-footer\">Ok</button>\n                    </div>\n                </Message>\n            </div>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}