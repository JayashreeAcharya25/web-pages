{"ast":null,"code":"import _asyncToGenerator from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"D:\\\\Jaya\\\\proj\\\\trial5\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{Component}from'react';import'../../Admin-css/Admin-Detail.css';import Edit from'./EditBlog';import Message from'./Message';import Alert from'./AlertMessage';import Axios from'../../../../axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ViewBlog=/*#__PURE__*/function(_Component){_inherits(ViewBlog,_Component);var _super=_createSuper(ViewBlog);function ViewBlog(props){var _this;_classCallCheck(this,ViewBlog);_this=_super.call(this,props);_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.openModal=function(e){_this.setState({show:true});};_this.closeModal=function(e){_this.setState({show:false});};_this.openMessage=function(e){_this.setState({message:true});};_this.closeMessage=function(e){_this.setState({message:false});_this.refreshPage();};_this.openAlertMessage=function(id){_this.setState({alert:true,id:id});};_this.closeAlertMessage=function(e){_this.setState({alert:false});};_this.editPost=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var editingItem;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:editingItem=_this.state.blogpost.find(function(post){return post.post_id===id;});console.log(editingItem);_context.next=4;return _this.setState({post_name:editingItem.post_name,post_category:editingItem.post_category,post_subcategory:editingItem.post_subcategory,post_image:editingItem.post_image.split(\"/\").pop(),post_description:editingItem.post_description,post_date:editingItem.post_date,post_authname:editingItem.post_authname,editMode:id});case 4:_this.openModal();case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();var setImage=0;_this.state={blogpost:[],bcategories:[],id:'',show:false,message:false,editMode:false,responseData:'',post_name:'',post_category:'',post_subcategory:'',post_image:null,post_description:'',post_date:'',post_authname:'',currentDate:new Date().toLocaleString(),formErrors:{},setImage:setImage};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.handleUpdate=_this.handleUpdate.bind(_assertThisInitialized(_this));_this.closeModal=_this.closeModal.bind(_assertThisInitialized(_this));_this.openModal=_this.openModal.bind(_assertThisInitialized(_this));_this.openMessage=_this.openMessage.bind(_assertThisInitialized(_this));_this.closeMessage=_this.closeMessage.bind(_assertThisInitialized(_this));_this.closeAlertMessage=_this.closeAlertMessage.bind(_assertThisInitialized(_this));_this.onUpload=_this.onUpload.bind(_assertThisInitialized(_this));_this.triggerInputFile=_this.triggerInputFile.bind(_assertThisInitialized(_this));_this.refreshPage=_this.refreshPage.bind(_assertThisInitialized(_this));_this.handleFormValidation=_this.handleFormValidation.bind(_assertThisInitialized(_this));return _this;}_createClass(ViewBlog,[{key:\"refreshPage\",value:function refreshPage(){window.location.reload(false);}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;Axios.get('/getPost').then(function(response){// console.log(response)\n_this2.setState({blogpost:response.data});}).catch(function(error){console.log(error);});Axios.get('/getPostCategory').then(function(response){// console.log(response)\n_this2.setState({bcategories:response.data});}).catch(function(error){console.log(error);});}},{key:\"onUpload\",value:function onUpload(e){// let file = e.target.files[0];\nthis.setState({post_image:e.target.files[0],setImage:1});console.log(e.target.files[0]);}},{key:\"triggerInputFile\",value:function triggerInputFile(){this.fileInput.click();}},{key:\"handleFormValidation\",value:function handleFormValidation(){var formErrors={};var isValid=true;var _this$state=this.state,post_name=_this$state.post_name,post_category=_this$state.post_category,post_subcategory=_this$state.post_subcategory,post_description=_this$state.post_description,post_authname=_this$state.post_authname;if(post_name===''){formErrors.post_nameError=\"Blog Title is Required!!\";isValid=false;}if(post_category===''){formErrors.post_categoryError=\"Blog Category Name is Required!!\";isValid=false;}if(post_subcategory===''){formErrors.post_subcategoryError=\"Sub Category Name is Required!!\";isValid=false;}if(post_description===''){formErrors.post_descriptionError=\"Description is Required!!\";isValid=false;}if(post_authname===''){formErrors.post_authnameError=\"Name is Required!!\";isValid=false;}if(post_category.length===1){formErrors.post_categoryError=\"Category Name must be of of 4 or more\";isValid=false;}if(post_category.length===2){formErrors.post_categoryError=\"Category Name must be of of 4 or more\";isValid=false;}if(post_category.length===3){formErrors.post_categoryError=\"Category Name must be of of 4 or more\";isValid=false;}if(post_category.length>50){formErrors.post_categoryError=\"Category Name must be of length 50\";isValid=false;}if(post_category.match(/[!@/$%^&*(),.?\":{}|<>]/)){formErrors.post_categoryError=\"No Special Characters\";isValid=false;}if(post_subcategory.length===1){formErrors.post_subcategoryError=\"Sub Category Name must be of of 4 or more\";isValid=false;}if(post_subcategory.length===2){formErrors.post_subcategoryError=\"Sub Category Name must be of of 4 or more\";isValid=false;}if(post_subcategory.length===3){formErrors.post_subcategoryError=\"Sub Category Name must be of of 4 or more\";isValid=false;}if(post_subcategory.length>50){formErrors.post_subcategoryError=\"Sub Category Name must be of length 50\";isValid=false;}if(post_subcategory.match(/[!@/$%^&*(),.?\":{}|<>]/)){formErrors.post_subcategoryError=\"No Special Characters\";isValid=false;}if(post_name.length===1){formErrors.post_nameError=\"Title must be of of 4 or more\";isValid=false;}if(post_name.length===2){formErrors.post_nameError=\"Title must be of of 4 or more\";isValid=false;}if(post_name.length===3){formErrors.post_nameError=\"Title must be of of 4 or more\";isValid=false;}if(post_name.length>250){formErrors.post_nameError=\"Title must be of length 250\";isValid=false;}if(post_name.match(/[!@/$%^&*(),.?\":{}|<>]/)){formErrors.post_nameError=\"No Special Characters\";isValid=false;}if(post_description.length>2000){formErrors.post_descriptionError=\"Description must be of length 2000\";isValid=false;}if(post_description.length<10){formErrors.post_descriptionError=\"Description must be of 10 or more\";isValid=false;}if(post_authname.length===1){formErrors.post_authnameError=\"Name must be of of 4 or more\";isValid=false;}if(post_authname.length===2){formErrors.post_authnameError=\"Name must be of of 4 or more\";isValid=false;}if(post_authname.length===3){formErrors.post_authnameError=\"Name must be of of 4 or more\";isValid=false;}if(post_authname.length>30){formErrors.post_authnameError=\"Name must be of length 30\";isValid=false;}if(post_authname.match(/[!@/$%^&*(),.?\":{}|<>]/)){formErrors.post_authnameError=\"No Special Characters\";isValid=false;}this.setState({formErrors:formErrors});return isValid;}},{key:\"deletePost\",value:function deletePost(id){var _this3=this;// console.log(this.state);\nAxios.delete(\"/deletePost/\".concat(id)).then(function(response){_this3.setState({alert:false,responseData:response.data.message});_this3.openMessage();}).catch(function(error){console.log(error);});}},{key:\"handleUpdate\",value:function handleUpdate(e){var _this4=this;e.preventDefault();var isValid=this.handleFormValidation();if(isValid){var id=this.state.editMode;this.setState({editMode:true});if(this.state.setImage===1){var data=new FormData();data.append('post_name',this.state.post_name);data.append('post_category',this.state.post_category);data.append('post_subcategory',this.state.post_subcategory);data.append('post_image',this.state.post_image);data.append('post_description',this.state.post_description);data.append('post_date',this.state.post_date);data.append('post_authname',this.state.post_authname);Axios.put(\"/editPost/\".concat(id,\"/\").concat(this.state.setImage),data).then(function(response){_this4.closeModal();_this4.setState({responseData:response.data.message});_this4.openMessage();}).catch(function(error){console.log(error);});}else if(this.state.setImage===0){var _data={post_name:this.state.post_name,post_category:this.state.post_category,post_subcategory:this.state.post_subcategory,post_description:this.state.post_description,post_date:this.state.post_date,post_authname:this.state.post_authname};Axios.put(\"/editPost/\".concat(id),_data).then(function(response){_this4.closeModal();_this4.setState({responseData:response.data.message});_this4.openMessage();}).catch(function(error){console.log(error);});}}}},{key:\"render\",value:function render(){var _this5=this;var _this$state2=this.state,blogpost=_this$state2.blogpost,bcategories=_this$state2.bcategories,responseData=_this$state2.responseData;var showHide=this.state.show?\"edit-form display-block\":\"edit-form display-none\";var messageHide=this.state.message?\"message-box display-block\":\"message-box display-none\";var alertHide=this.state.alert?\"message-box display-block\":\"message-box display-none\";return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"class-table\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-title\",children:/*#__PURE__*/_jsx(\"h5\",{children:\"Blog List\"})}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Sl. No\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Image\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Post Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Sub Category\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:blogpost.length?blogpost.map(function(post){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:post.post_id}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:post.post_image.replace('/public',''),alt:\"\"})}),/*#__PURE__*/_jsx(\"td\",{children:post.post_name}),/*#__PURE__*/_jsx(\"td\",{children:post.post_category}),/*#__PURE__*/_jsx(\"td\",{children:post.post_subcategory}),/*#__PURE__*/_jsx(\"td\",{children:post.post_date}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{class:\"action-btns\",children:[/*#__PURE__*/_jsx(\"button\",{class:\"div-action-btn\",onClick:_this5.editPost.bind(_this5,post.post_id),children:/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-pen\"})}),/*#__PURE__*/_jsx(\"button\",{class:\"div-action-btn\",onClick:_this5.openAlertMessage.bind(_this5,post.post_id),children:/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-trash\"})})]})})]},post.id);}):null})]}),/*#__PURE__*/_jsxs(Edit,{show:this.state.show,handleClose:this.closeModal,handleSubmit:this.handleUpdate,showHide:showHide,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"div-label\",children:/*#__PURE__*/_jsx(\"label\",{children:\"Post Title\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"div-input\",children:/*#__PURE__*/_jsx(\"input\",{class:\"form-control\",type:\"text\",name:\"post_name\",onChange:this.handleChange,value:this.state.post_name})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"div-label\",children:/*#__PURE__*/_jsx(\"label\",{children:\"Post Category\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"div-input\",children:/*#__PURE__*/_jsx(\"div\",{className:\"div-select\",children:/*#__PURE__*/_jsxs(\"select\",{class:\"form-control\",onChange:this.handleChange,name:\"post_category\",value:this.state.post_category,children:[/*#__PURE__*/_jsx(\"option\",{children:\"Select Category\"}),bcategories.length?bcategories.map(function(category){return/*#__PURE__*/_jsx(\"option\",{name:category.post_category,value:category.post_category,children:category.post_category},category.id);}):null]})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"div-label\",children:/*#__PURE__*/_jsx(\"label\",{children:\"Post Sub Category\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"div-input\",children:/*#__PURE__*/_jsx(\"input\",{class:\"form-control\",type:\"text\",name:\"post_subcategory\",onChange:this.handleChange,value:this.state.post_subcategory})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"div-label\",children:/*#__PURE__*/_jsx(\"label\",{children:\"Image\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"div-input\",children:[/*#__PURE__*/_jsx(\"input\",{class:\"form-control\",value:this.state.post_image,onClick:this.triggerInputFile}),/*#__PURE__*/_jsx(\"input\",{ref:function ref(fileInput){return _this5.fileInput=fileInput;},Style:\"display : none\",type:\"file\",onChange:this.onUpload,name:\"post_image\",accept:\".png, .jpg\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"div-label\",children:/*#__PURE__*/_jsx(\"label\",{children:\"Post Content\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"div-input\",children:/*#__PURE__*/_jsx(\"textarea\",{rows:\"5\",class:\"form-control\",type:\"text\",name:\"post_description\",onChange:this.handleChange,value:this.state.post_description})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"div-label\",children:/*#__PURE__*/_jsx(\"label\",{children:\"Date\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"div-input\",children:/*#__PURE__*/_jsx(\"input\",{class:\"form-control\",type:\"text\",onChange:this.handleChange,name:\"post_date\",value:this.state.currentDate})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"div-label\",children:/*#__PURE__*/_jsx(\"label\",{children:\"Your Name\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"div-input\",children:/*#__PURE__*/_jsx(\"input\",{class:\"form-control\",type:\"text\",name:\"post_authname\",onChange:this.handleChange,value:this.state.post_authname})})]})]}),/*#__PURE__*/_jsxs(Message,{show:this.state.message,messageHide:messageHide,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Success !\"}),/*#__PURE__*/_jsx(\"p\",{children:responseData}),/*#__PURE__*/_jsx(\"div\",{className:\"m-footer\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:this.closeMessage,className:\"btn-footer\",children:\"Ok\"})})]}),/*#__PURE__*/_jsxs(Alert,{show:this.state.alert,alertHide:alertHide,children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Are You Sure\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{children:\"You want to Delete this?\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"m-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:this.deletePost.bind(this,this.state.id),className:\"btn-footer\",children:\"Ok\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:this.closeAlertMessage,className:\"btn-footer\",children:\"Cancel\"})]})]})]})});}}]);return ViewBlog;}(Component);export{ViewBlog as default};","map":{"version":3,"sources":["D:/Jaya/proj/trial5/frontend/src/components/AdminDashboard/Blog/Content/ViewBlog.js"],"names":["React","Component","Edit","Message","Alert","Axios","ViewBlog","props","handleChange","e","setState","target","name","value","openModal","show","closeModal","openMessage","message","closeMessage","refreshPage","openAlertMessage","id","alert","closeAlertMessage","editPost","editingItem","state","blogpost","find","post","post_id","console","log","post_name","post_category","post_subcategory","post_image","split","pop","post_description","post_date","post_authname","editMode","setImage","bcategories","responseData","currentDate","Date","toLocaleString","formErrors","bind","handleUpdate","onUpload","triggerInputFile","handleFormValidation","window","location","reload","get","then","response","data","catch","error","files","fileInput","click","isValid","post_nameError","post_categoryError","post_subcategoryError","post_descriptionError","post_authnameError","length","match","delete","preventDefault","FormData","append","put","showHide","messageHide","alertHide","map","replace","category","deletePost"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport '../../Admin-css/Admin-Detail.css'\nimport Edit from './EditBlog'\nimport Message from './Message'\nimport Alert from './AlertMessage'\n\nimport Axios from '../../../../axios'\n\nexport default class ViewBlog extends Component {\n\n    constructor (props) {\n        super(props)\n\n        let setImage = 0\n\n        this.state = {\n\n            blogpost: [],\n            bcategories: [],\n            id: '',\n\n            show: false,\n            message: false,\n            editMode: false,\n\n            responseData: '',\n\n            post_name: '',\n            post_category: '',\n            post_subcategory: '',\n            post_image: null,\n            post_description: '',\n            post_date: '',\n            post_authname: '',\n\n            currentDate: new Date().toLocaleString(),\n            \n            formErrors: {},\n\n            setImage,\n        }\n     \n        this.handleChange = this.handleChange.bind(this);\n        this.handleUpdate = this.handleUpdate.bind(this);\n\n        this.closeModal = this.closeModal.bind(this);\n        this.openModal = this.openModal.bind(this);\n\n        this.openMessage = this.openMessage.bind(this);\n        this.closeMessage = this.closeMessage.bind(this);\n\n        this.closeAlertMessage = this.closeAlertMessage.bind(this);\n        \n        this.onUpload = this.onUpload.bind(this);\n        this.triggerInputFile = this.triggerInputFile.bind(this);\n        this.refreshPage = this.refreshPage.bind(this);\n\n        this.handleFormValidation = this.handleFormValidation.bind(this);\n    }\n\n    handleChange = (e) => {\n        this.setState({ [e.target.name]: e.target.value });\n    }\n\n    refreshPage() {\n        window.location.reload(false);\n    }\n\n    componentDidMount() {\n\n        Axios.get('/getPost')\n            .then(response => {\n                // console.log(response)\n                this.setState({ blogpost: response.data })\n            })\n            .catch(error => {\n                console.log(error)\n            })\n\n        Axios.get('/getPostCategory')\n            .then(response => {\n                // console.log(response)\n                this.setState({ bcategories: response.data })\n            })\n            .catch(error => {\n                console.log(error)\n            })\n    }\n\n\n    openModal = (e) => {\n        this.setState({\n            show: true\n        })\n    }\n\n    closeModal = (e) => {\n        this.setState({\n            show: false\n        })\n    }\n\n    openMessage = (e) => {\n        this.setState({\n            message: true,\n        })\n    }\n\n    closeMessage = (e) => {\n        this.setState({\n            message: false,\n        })\n        this.refreshPage();\n    }\n\n    openAlertMessage = (id) => {\n        this.setState({\n            alert: true,\n            id: id,\n        })\n    }\n\n    closeAlertMessage = (e) => {\n        this.setState({\n            alert: false,\n\n        })\n    }\n\n    onUpload(e) {\n        // let file = e.target.files[0];\n        this.setState({\n            post_image: e.target.files[0],\n            setImage: 1,\n        })\n        console.log(e.target.files[0]);\n    }\n\n    \n\n    triggerInputFile() { this.fileInput.click() }\n\n\n\n\n    handleFormValidation() {\n        const formErrors = {};\n        let isValid = true;\n\n        const { post_name, post_category, post_subcategory, post_description, post_authname } = this.state\n\n        if (post_name === '') {\n            formErrors.post_nameError = \"Blog Title is Required!!\";\n            isValid = false;\n        }\n        if (post_category === '') {\n            formErrors.post_categoryError = \"Blog Category Name is Required!!\";\n            isValid = false;\n        }\n        if (post_subcategory === '') {\n            formErrors.post_subcategoryError = \"Sub Category Name is Required!!\";\n            isValid = false;\n        }\n        if (post_description === '') {\n            formErrors.post_descriptionError = \"Description is Required!!\";\n            isValid = false;\n        }\n        if (post_authname === '') {\n            formErrors.post_authnameError = \"Name is Required!!\";\n            isValid = false;\n        }\n\n\n        if (post_category.length === 1) {\n            formErrors.post_categoryError = \"Category Name must be of of 4 or more\";\n            isValid = false;\n        }\n        if (post_category.length === 2) {\n            formErrors.post_categoryError = \"Category Name must be of of 4 or more\";\n            isValid = false;\n        }\n        if (post_category.length === 3) {\n            formErrors.post_categoryError = \"Category Name must be of of 4 or more\";\n            isValid = false;\n        }\n        if (post_category.length > 50) {\n            formErrors.post_categoryError = \"Category Name must be of length 50\";\n            isValid = false;\n        }\n        if (post_category.match(/[!@/$%^&*(),.?\":{}|<>]/)) {\n            formErrors.post_categoryError = \"No Special Characters\";\n            isValid = false;\n        }\n\n        if (post_subcategory.length === 1) {\n            formErrors.post_subcategoryError = \"Sub Category Name must be of of 4 or more\";\n            isValid = false;\n        }\n        if (post_subcategory.length === 2) {\n            formErrors.post_subcategoryError = \"Sub Category Name must be of of 4 or more\";\n            isValid = false;\n        }\n        if (post_subcategory.length === 3) {\n            formErrors.post_subcategoryError = \"Sub Category Name must be of of 4 or more\";\n            isValid = false;\n        }\n        if (post_subcategory.length > 50) {\n            formErrors.post_subcategoryError = \"Sub Category Name must be of length 50\";\n            isValid = false;\n        }\n        if (post_subcategory.match(/[!@/$%^&*(),.?\":{}|<>]/)) {\n            formErrors.post_subcategoryError = \"No Special Characters\";\n            isValid = false;\n        }\n\n        if (post_name.length === 1) {\n            formErrors.post_nameError = \"Title must be of of 4 or more\";\n            isValid = false;\n        }\n        if (post_name.length === 2) {\n            formErrors.post_nameError = \"Title must be of of 4 or more\";\n            isValid = false;\n        }\n        if (post_name.length === 3) {\n            formErrors.post_nameError = \"Title must be of of 4 or more\";\n            isValid = false;\n        }\n        if (post_name.length > 250) {\n            formErrors.post_nameError = \"Title must be of length 250\";\n            isValid = false;\n        }\n        if (post_name.match(/[!@/$%^&*(),.?\":{}|<>]/)) {\n            formErrors.post_nameError = \"No Special Characters\";\n            isValid = false;\n        }\n\n        if (post_description.length > 2000) {\n            formErrors.post_descriptionError = \"Description must be of length 2000\";\n            isValid = false;\n        }\n        if (post_description.length < 10) {\n            formErrors.post_descriptionError = \"Description must be of 10 or more\";\n            isValid = false;\n        }\n\n        if (post_authname.length === 1) {\n            formErrors.post_authnameError = \"Name must be of of 4 or more\";\n            isValid = false;\n        }\n        if (post_authname.length === 2) {\n            formErrors.post_authnameError = \"Name must be of of 4 or more\";\n            isValid = false;\n        }\n        if (post_authname.length === 3) {\n            formErrors.post_authnameError = \"Name must be of of 4 or more\";\n            isValid = false;\n        }\n        if (post_authname.length > 30) {\n            formErrors.post_authnameError = \"Name must be of length 30\";\n            isValid = false;\n        }\n        if (post_authname.match(/[!@/$%^&*(),.?\":{}|<>]/)) {\n            formErrors.post_authnameError = \"No Special Characters\";\n            isValid = false;\n        }\n\n        this.setState({ formErrors });\n        return isValid;\n    }\n\n\n\n    \n\n    deletePost(id) {\n\n        // console.log(this.state);\n        Axios.delete(`/deletePost/${ id }`)\n            .then(response => {\n\n                this.setState({\n                    alert: false,\n                    responseData: response.data.message\n                })\n\n                this.openMessage();\n            })\n            .catch(error => {\n                console.log(error);\n               \n            })\n    }\n\n    editPost = async (id) => {\n\n\n        let editingItem = this.state.blogpost.find(post => {\n            return post.post_id === id;\n        })\n\n        console.log(editingItem)\n      \n        await this.setState({\n            post_name: editingItem.post_name,\n            post_category: editingItem.post_category,\n            post_subcategory: editingItem.post_subcategory,\n            post_image: editingItem.post_image.split(\"/\").pop(),\n            post_description: editingItem.post_description,\n            post_date: editingItem.post_date,\n            post_authname: editingItem.post_authname,\n            editMode: id,\n\n        })\n\n        this.openModal();\n\n    }\n\n\n    handleUpdate(e) {\n        e.preventDefault();\n\n        const isValid = this.handleFormValidation();\n        if (isValid) {\n\n            let id = this.state.editMode;\n\n            this.setState({\n                editMode: true,\n            })\n        \n\n            if (this.state.setImage === 1) {\n\n                let data = new FormData();\n                data.append('post_name', this.state.post_name);\n                data.append('post_category', this.state.post_category);\n                data.append('post_subcategory', this.state.post_subcategory);\n                data.append('post_image', this.state.post_image);\n                data.append('post_description', this.state.post_description);\n                data.append('post_date', this.state.post_date);\n                data.append('post_authname', this.state.post_authname);\n\n                Axios.put(`/editPost/${ id }/${ this.state.setImage}`, data)\n                    .then(response => {\n\n                        this.closeModal();\n\n                        this.setState({\n                            responseData: response.data.message\n                        })\n\n                        this.openMessage();\n                    })\n\n                    .catch(error => {\n                        console.log(error);\n\n                    })\n            }\n            else if (this.state.setImage === 0) {\n\n                const data = {\n                    post_name: this.state.post_name,\n                    post_category: this.state.post_category,\n                    post_subcategory: this.state.post_subcategory,\n                    post_description: this.state.post_description,\n                    post_date: this.state.post_date,\n                    post_authname: this.state.post_authname,\n\n                }\n                Axios.put(`/editPost/${ id }`, data)\n                    .then(response => {\n\n                        this.closeModal();\n\n                        this.setState({\n                            responseData: response.data.message\n                        })\n\n                        this.openMessage();\n                    })\n\n                    .catch(error => {\n                        console.log(error);\n\n                    })\n            }\n        }\n    }\n\n   \n\n\n    render() {\n\n        const { blogpost, bcategories, responseData } = this.state\n\n        const showHide = this.state.show ? \"edit-form display-block\" : \"edit-form display-none\";\n        const messageHide = this.state.message ? \"message-box display-block\" : \"message-box display-none\";\n        const alertHide = this.state.alert ? \"message-box display-block\" : \"message-box display-none\";\n\n        return (\n            <>\n                <div className=\"class-table\">\n                    <div className=\"section-title\">\n                        <h5>Blog List</h5>\n                    </div>\n                    <table>\n                        <thead>\n                            <tr>\n                                <th>Sl. No</th>\n                                <th>Image</th>\n                                <th>Post Name</th>\n                                <th>Category</th>\n                                <th>Sub Category</th>\n                                <th>Date</th>\n                                <th>Action</th>\n\n                            </tr>\n                        </thead>\n                        <tbody>\n\n                            {\n                                blogpost.length ?\n                                    blogpost.map(post => <tr key={ post.id }>\n                                        <td>{ post.post_id }</td>\n                                        <td><img src={ post.post_image.replace('/public', '') } alt=\"\" /></td>\n                                        <td>{ post.post_name}</td>\n                                        \n                                        <td>{ post.post_category }</td>\n                                        <td>{ post.post_subcategory }</td>\n                                        <td>{ post.post_date }</td>\n\n                                        <td>\n                                            <div class=\"action-btns\">\n                                                <button class=\"div-action-btn\" onClick={ this.editPost.bind(this, post.post_id) }><i class=\"fas fa-pen\"></i></button>\n                                                <button class=\"div-action-btn\" onClick={ this.openAlertMessage.bind(this, post.post_id) } ><i class=\"fas fa-trash\"></i></button>\n                                            </div>\n                                        </td>\n                                    </tr>) : null\n                            }\n\n                        </tbody>\n                    </table>\n                    <Edit show={ this.state.show } handleClose={ this.closeModal } handleSubmit={ this.handleUpdate } showHide={ showHide }>\n                        <div className=\"form-box\">\n                            <div className=\"div-label\">\n                                <label>Post Title</label>\n                            </div>\n                            <div className=\"div-input\">\n                                <input class=\"form-control\" type=\"text\" name=\"post_name\" onChange={ this.handleChange } value={ this.state.post_name } />\n                            </div>\n                        </div>\n                        <div className=\"form-box\">\n                            <div className=\"div-label\">\n                                <label>Post Category</label>\n                            </div>\n                            <div className=\"div-input\">\n                                <div className=\"div-select\">\n                                    <select class=\"form-control\" onChange={ this.handleChange } name=\"post_category\" value={ this.state.post_category }>\n                                        <option>Select Category</option>{\n                                            bcategories.length ?\n                                                bcategories.map(category =>\n\n                                                    <option name={ category.post_category } value={ category.post_category } key={ category.id }>{ category.post_category }</option>\n                                                ) : null\n                                        }\n                                    </select>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"form-box\">\n                            <div className=\"div-label\">\n                                <label>Post Sub Category</label>\n                            </div>\n                            <div className=\"div-input\">\n                                <input class=\"form-control\" type=\"text\" name=\"post_subcategory\" onChange={ this.handleChange } value={ this.state.post_subcategory } />\n                            </div>\n                        </div>\n                        <div className=\"form-box\">\n                            <div className=\"div-label\">\n                                <label>Image</label>\n                            </div>\n                            <div className=\"div-input\">\n                                <input class=\"form-control\" value={ this.state.post_image } onClick={ this.triggerInputFile } />\n                                <input ref={ fileInput => this.fileInput = fileInput } Style={ \"display : none\" } type=\"file\" onChange={ this.onUpload } name=\"post_image\" accept=\".png, .jpg\" />\n\n                            </div>\n                        </div>\n                        <div className=\"form-box\">\n                            <div className=\"div-label\">\n                                <label>Post Content</label>\n                            </div>\n                            <div className=\"div-input\">\n                                <textarea rows=\"5\" class=\"form-control\" type=\"text\" name=\"post_description\" onChange={ this.handleChange } value={ this.state.post_description } />\n                            </div>\n                        </div>\n                        <div className=\"form-box\">\n                            <div className=\"div-label\">\n                                <label>Date</label>\n                            </div>\n                            <div className=\"div-input\">\n                                <input class=\"form-control\" type=\"text\" onChange={ this.handleChange } name=\"post_date\" value={ this.state.currentDate } />\n                            </div>\n                        </div>\n                        <div className=\"form-box\">\n                            <div className=\"div-label\">\n                                <label>Your Name</label>\n                            </div>\n                            <div className=\"div-input\">\n                                <input class=\"form-control\" type=\"text\" name=\"post_authname\" onChange={ this.handleChange } value={ this.state.post_authname } />\n                            </div>\n                        </div>\n\n                    </Edit>\n\n                    <Message show={ this.state.message } messageHide={ messageHide }>\n                        <h3>Success !</h3>\n                        <p>{ responseData }</p>\n                        <div className=\"m-footer\">\n                            <button type=\"button\" onClick={ this.closeMessage } className=\"btn-footer\">Ok</button>\n                        </div>\n                    </Message>\n\n                    <Alert show={ this.state.alert } alertHide={ alertHide }>\n                        <h3>Are You Sure<br /><span>You want to Delete this?</span></h3>\n                        <div className=\"m-footer\">\n\n                            <button type=\"button\" onClick={ this.deletePost.bind(this, this.state.id) } className=\"btn-footer\">Ok</button>\n                            <button type=\"button\" onClick={ this.closeAlertMessage } className=\"btn-footer\">Cancel</button>\n                        </div>\n                    </Alert>\n                </div>\n\n            </>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}