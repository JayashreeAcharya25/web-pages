{"ast":null,"code":"import _defineProperty from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/Jaya/proj/trial5/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component,Fragment}from'react';import Header from'../Header/Header2';import'./Login.css';import Axios from'../../axios';import{Redirect}from'react-router-dom';// import Signup from './Signup'\n// import Signin from './Signin'\n// import { BrowserRouter as Router, Route, Redirect} from 'react-router-dom';\nimport Helmet from'react-helmet';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);// onNavigateHome(){\n//     browserHistory.push(\"/\")\n// }\nfunction Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.handleSubmit=function(e){e.preventDefault();var _this$state=_this.state,email=_this$state.email,password=_this$state.password;Axios.post('/login',{headers:{'Content-Type':'application/json',\"x-access-token\":localStorage.getItem(\"token\")},email:email,password:password}).then(function(response){// console.log(\"From Login\", response)\n// alert(\"LoggedIn\")\n// if(!response.data.message){\nconsole.log(\"------------\");console.log(response.data);if(!response.data.auth){_this.setState({// loginStatus : response.data.message,\nloginStatus:false// LoggedIn: true\n});}else{// console.log(response)\nlocalStorage.setItem(\"token\",response.data.token);_this.setState({// loginStatus : response.data[0].email\nloginStatus:true,redirect:\"/user_dashboard/Home\"});}}).catch(function(error){console.log(\"Login Error\",error);});};_this.state={type:'User',email:'',password:'',loginStatue:false,// LoggedIn: false\nredirect:null};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));// this.userAuthenticated = this.userAuthenticated(this);\nAxios.defaults.withCredentials=true;return _this;}// componentDidMount(){\n//     Axios.get('http://localhost:4040/login')\n//     .then( (response) =>{\n//         // console.log(response);\n//         if(response.data.auth === true){\n//                 this.setState({\n//                 loginStatus : response.data.user[0].email\n//             })\n//         }else{\n//             this.setState({\n//                 loginStatus : response.data.message\n//             })\n//         }\n//     }).catch(error =>{\n//         console.log(error);\n//     })\n// }\n_createClass(Login,[{key:\"render\",value:// userAuthenticated = () =>{\n//     Axios.get('http://localhost:4040/isUserAuth', {\n//         headers: {\n//             'Content-Type': 'application/json',\n//             \"x-access-token\": localStorage.getItem(\"token\")\n//         }\n//     })\n//     .then((response) =>{\n//         console.log(response);\n//         // this.setState({\n//         //     // loginStatus : response.data[0].email\n//         // });\n//     })\n// }\nfunction render(){var _this$state2=this.state,loginStatus=_this$state2.loginStatus,redirect=_this$state2.redirect;// if(loginStatus === true){\n//     <Redirect to=\"/user_dashboard/Home\"/>\n// }\n// else {\n//     <Redirect to=\"/login\"/>\n// }\n// if(this.state.LoggedIn){\n//     return (<Redirect to =\"/user_dashboard\"/> );\n// }\n// <Route exact path =\"/login\">{this.state.loginStatus ? <Redirect to =\"/user_dashboard\"/> : <Redirect to=\"/login\"/>}</Route>\nif(loginStatus===true){return/*#__PURE__*/_jsx(Redirect,{to:redirect});}return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Helmet,{children:[/*#__PURE__*/_jsx(\"title\",{children:\"User Login\"}),/*#__PURE__*/_jsx(\"meta\",{name:\"description\",content:\"User Login\"})]}),/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"div\",{className:\"login\",children:/*#__PURE__*/_jsx(\"div\",{className:\"login-banner\",children:/*#__PURE__*/_jsx(\"section\",{className:\"div-login-main\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"div-form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"login-title\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"div-label\",children:/*#__PURE__*/_jsx(\"label\",{children:\"Email\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"div-input\",children:/*#__PURE__*/_jsx(\"input\",{class:\"form-control\",type:\"email\",name:\"email\",onChange:this.handleChange,value:this.email,required:true})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"div-label\",children:/*#__PURE__*/_jsx(\"label\",{children:\"Paasword\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"div-input\",children:/*#__PURE__*/_jsx(\"input\",{class:\"form-control\",type:\"password\",name:\"password\",onChange:this.handleChange,value:this.password,required:true})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"div-row\",children:/*#__PURE__*/_jsx(\"a\",{class:\"text-left\",href:\"/\",children:\"Forgot Password\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"div-card\",children:/*#__PURE__*/_jsx(\"button\",{onClick:this.handleSubmit,class:\"submit-btn\",children:\"Login\"})})]})})})})]})});}}]);return Login;}(Component);export{Login as default};","map":{"version":3,"sources":["D:/Jaya/proj/trial5/frontend/src/components/Login/Login.js"],"names":["React","Component","Fragment","Header","Axios","Redirect","Helmet","Login","props","handleChange","e","setState","target","name","value","handleSubmit","preventDefault","state","email","password","post","headers","localStorage","getItem","then","response","console","log","data","auth","loginStatus","setItem","token","redirect","catch","error","type","loginStatue","bind","defaults","withCredentials"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react'\nimport Header from '../Header/Header2'\nimport './Login.css'\nimport Axios from '../../axios'\nimport { Redirect } from 'react-router-dom'\n// import Signup from './Signup'\n// import Signin from './Signin'\n// import { BrowserRouter as Router, Route, Redirect} from 'react-router-dom';\nimport Helmet from 'react-helmet'\n\nexport default class Login extends Component {\n\n    // onNavigateHome(){\n    //     browserHistory.push(\"/\")\n    // }\n\n    constructor(props) {\n        super(props)\n        \n        this.state = {\n            type:'User',\n            email: '',\n            password: '',\n            loginStatue: false,\n            // LoggedIn: false\n            redirect: null\n        }\n        this.handleChange = this.handleChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        // this.userAuthenticated = this.userAuthenticated(this);\n        Axios.defaults.withCredentials = true\n    }\n\n    // componentDidMount(){\n    //     Axios.get('http://localhost:4040/login')\n    //     .then( (response) =>{\n    //         // console.log(response);\n    //         if(response.data.auth === true){\n    //                 this.setState({\n    //                 loginStatus : response.data.user[0].email\n    //             })\n    //         }else{\n    //             this.setState({\n    //                 loginStatus : response.data.message\n    //             })\n    //         }\n                \n    //     }).catch(error =>{\n    //         console.log(error);\n    //     })\n        \n        \n    // }\n\n\n    handleChange = (e) =>{\n        this.setState({[e.target.name]: e.target.value});\n    }\n\n    handleSubmit = (e) =>{\n\n        e.preventDefault();\n        const {email, password} = this.state;\n\n        Axios.post('/login',{\n            headers: {\n                'Content-Type': 'application/json',\n                \"x-access-token\": localStorage.getItem(\"token\")\n            },\n            email: email,\n            password: password,\n        })\n        .then(response =>{\n            // console.log(\"From Login\", response)\n            // alert(\"LoggedIn\")\n            // if(!response.data.message){\n                console.log(\"------------\")\n                console.log(response.data);\n            if(!response.data.auth){\n                this.setState({\n                    // loginStatus : response.data.message,\n                    loginStatus : false,\n                    // LoggedIn: true\n                })\n               \n            } else {\n                // console.log(response)\n                localStorage.setItem(\"token\", response.data.token)\n                this.setState({\n                    // loginStatus : response.data[0].email\n                    loginStatus : true,\n                    redirect: \"/user_dashboard/Home\"\n                    \n                });\n                \n            }\n        })\n        .catch(error =>{\n            console.log(\"Login Error\", error)\n        })\n        \n    }\n\n    // userAuthenticated = () =>{\n    //     Axios.get('http://localhost:4040/isUserAuth', {\n    //         headers: {\n    //             'Content-Type': 'application/json',\n    //             \"x-access-token\": localStorage.getItem(\"token\")\n    //         }\n    //     })\n    //     .then((response) =>{\n    //         console.log(response);\n    //         // this.setState({\n    //         //     // loginStatus : response.data[0].email\n                \n               \n                    \n    //         // });\n            \n    //     })\n    // }\n    \n    render() {\n        const {loginStatus, redirect} = this.state\n        // if(loginStatus === true){\n        //     <Redirect to=\"/user_dashboard/Home\"/>\n        // }\n        // else {\n        //     <Redirect to=\"/login\"/>\n        // }\n        // if(this.state.LoggedIn){\n        //     return (<Redirect to =\"/user_dashboard\"/> );\n        // }\n        // <Route exact path =\"/login\">{this.state.loginStatus ? <Redirect to =\"/user_dashboard\"/> : <Redirect to=\"/login\"/>}</Route>\n        \n        if (loginStatus === true) {\n            return <Redirect to={redirect} />\n        } \n        return (\n            <Fragment>\n                {/* {loginStatus ? (<Redirect to=\"/user_dashboard/Home\"/>): ( */}\n                <div>\n                    <Helmet>\n                        <title>User Login</title>\n                        <meta name=\"description\" content=\"User Login\" />\n                    </Helmet>\n                    <Header/>\n                    <div className=\"login\">\n                        <div className=\"login-banner\"> \n                        \n                            <section className=\"div-login-main\">\n                                \n                                {/* <Link to=\"/login\">SignIn</Link> */}\n                            \n                                    {/* <Route path=\"/login\" as component={Signin}>\n                                        \n                                    </Route>\n                                    <Route path=\"/register\" as component={Signup}>\n                                        \n                                    </Route> */}\n                        \n                                <form className=\"div-form\">\n                                    <div className=\"login-title\">\n                                        <h2>Login</h2> \n                                    </div>\n\n                                    <div className=\"form-box\">\n                                        <div className=\"div-label\">\n                                            <label>Email</label>\n                                        </div>\n                                        <div className=\"div-input\">\n                                            <input class=\"form-control\" type=\"email\" name=\"email\" onChange={this.handleChange} value={this.email} required/>\n                                        </div>\n                                    </div>\n                                    <div className=\"form-box\">\n                                        <div className=\"div-label\">\n                                            <label>Paasword</label>\n                                        </div>\n                                        <div className=\"div-input\">\n                                            <input class=\"form-control\" type=\"password\" name=\"password\" onChange={this.handleChange} value={this.password} required/>\n                                        </div>\n                                    </div>\n                                    <div className=\"div-row\">\n                                        <a class=\"text-left\" href=\"/\">Forgot Password</a>\n                                        \n                                    </div>\n                                    <div className=\"div-card\">\n                                        <button onClick={this.handleSubmit} class=\"submit-btn\">Login</button>\n                                    </div>\n                                    {/* {loginStatus && (<button onClick={this.userAuthenticated} class=\"btn btn-primary\" >Check if Authenticated</button>)} */}\n                                    \n                                </form>\n\n                                \n                            </section>\n                        </div>\n                    </div>\n\n                </div>\n                {/* )} */}\n            </Fragment>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}